<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Field (secp256k1-internal.Libsecp256k1.Internal.Field)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">secp256k1-internal</a> &#x00BB; <a href="../../index.html">Libsecp256k1</a> &#x00BB; <a href="../index.html">Internal</a> &#x00BB; Field</nav><header class="odoc-preamble"><h1>Module <code><span>Internal.Field</span></code></h1><p>Field element module. * * Field elements can be represented in several ways, but code accessing * it (and implementations) need to take certain properties into account: * - Each field element can be normalized or not. * - Each field element has a magnitude, which represents how far away * its representation is away from normalization. Normalized elements * always have a magnitude of 1, but a magnitude of 1 doesn't imply * normality.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Storage" class="anchored"><a href="#module-Storage" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Storage/index.html">Storage</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-const" class="anchored"><a href="#val-const" class="anchor"></a><code><span><span class="keyword">val</span> const : <span>?&#8288;d7:int64 <span>&#45;&gt;</span></span> <span>?&#8288;d6:int64 <span>&#45;&gt;</span></span> <span>?&#8288;d5:int64 <span>&#45;&gt;</span></span> <span>?&#8288;d4:int64 <span>&#45;&gt;</span></span> <span>?&#8288;d3:int64 <span>&#45;&gt;</span></span> <span>?&#8288;d2:int64 <span>&#45;&gt;</span></span>
<span>?&#8288;d1:int64 <span>&#45;&gt;</span></span> <span>?&#8288;d0:int64 <span>&#45;&gt;</span></span> <span>unit <span>&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Unpacks a constant into a overlapping multi-limbed FE element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-normalize" class="anchored"><a href="#val-normalize" class="anchor"></a><code><span><span class="keyword">val</span> normalize : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Normalize a field element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-normalize_weak" class="anchored"><a href="#val-normalize_weak" class="anchor"></a><code><span><span class="keyword">val</span> normalize_weak : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Weakly normalize a field element: reduce it magnitude to 1, but don't fully normalize.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-normalize_var" class="anchored"><a href="#val-normalize_var" class="anchor"></a><code><span><span class="keyword">val</span> normalize_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Normalize a field element, without constant-time guarantee.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-normalizes_to_zero" class="anchored"><a href="#val-normalizes_to_zero" class="anchor"></a><code><span><span class="keyword">val</span> normalizes_to_zero : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Verify whether a field element represents zero i.e. would normalize to a zero value. The field implementation may optionally normalize the input, but this should not be relied upon.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-normalizes_to_zero_var" class="anchored"><a href="#val-normalizes_to_zero_var" class="anchor"></a><code><span><span class="keyword">val</span> normalizes_to_zero_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Verify whether a field element represents zero i.e. would normalize to a zero value. The field implementation may optionally normalize the input, but this should not be relied upon.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_int" class="anchored"><a href="#val-set_int" class="anchor"></a><code><span><span class="keyword">val</span> set_int : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set a field element equal to a small integer. Resulting field element is normalized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear" class="anchored"><a href="#val-clear" class="anchor"></a><code><span><span class="keyword">val</span> clear : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Sets a field element equal to zero, initializing all fields.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_zero" class="anchored"><a href="#val-is_zero" class="anchor"></a><code><span><span class="keyword">val</span> is_zero : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Verify whether a field element is zero. Requires the input to be normalized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_odd" class="anchored"><a href="#val-is_odd" class="anchor"></a><code><span><span class="keyword">val</span> is_odd : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check the &quot;oddness&quot; of a field element. Requires the input to be normalized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Compare two field elements. Requires magnitude-1 inputs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal_var" class="anchored"><a href="#val-equal_var" class="anchor"></a><code><span><span class="keyword">val</span> equal_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Same as secp256k1_fe_equal, but may be variable time.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cmp_var" class="anchored"><a href="#val-cmp_var" class="anchor"></a><code><span><span class="keyword">val</span> cmp_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Compare two field elements. Requires both inputs to be normalized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Alias to <code>cmp_var</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_b32" class="anchored"><a href="#val-set_b32" class="anchor"></a><code><span><span class="keyword">val</span> set_b32 : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="../../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Set a field element equal to 32-byte big endian value. If successful, the resulting field element is normalized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_b32" class="anchored"><a href="#val-get_b32" class="anchor"></a><code><span><span class="keyword">val</span> get_b32 : <span><a href="../../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Convert a field element to a 32-byte big endian value. Requires the input to be normalized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-negate" class="anchored"><a href="#val-negate" class="anchor"></a><code><span><span class="keyword">val</span> negate : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set a field element equal to the additive inverse of another. Takes a maximum magnitude of the input as an argument. The magnitude of the output is one higher.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mul_int" class="anchored"><a href="#val-mul_int" class="anchor"></a><code><span><span class="keyword">val</span> mul_int : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Multiplies the passed field element with a small integer constant. Multiplies the magnitude by that small integer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add" class="anchored"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Adds a field element to another. The result has the sum of the inputs' magnitudes as magnitude.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mul" class="anchored"><a href="#val-mul" class="anchor"></a><code><span><span class="keyword">val</span> mul : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Sets a field element to be the product of two others. Requires the inputs' magnitudes to be at most 8. The output magnitude is 1 (but not guaranteed to be normalized).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sqr" class="anchored"><a href="#val-sqr" class="anchor"></a><code><span><span class="keyword">val</span> sqr : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Sets a field element to be the square of another. Requires the input's magnitude to be at most 8. The output magnitude is 1 (but not guaranteed to be normalized).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sqrt" class="anchored"><a href="#val-sqrt" class="anchor"></a><code><span><span class="keyword">val</span> sqrt : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>If a has a square root, it is computed in r and 1 is returned. If a does not have a square root, the root of its negation is computed and 0 is returned. The input's magnitude can be at most 8. The output magnitude is 1 (but not guaranteed to be normalized). The result in r will always be a square itself.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_quad_var" class="anchored"><a href="#val-is_quad_var" class="anchor"></a><code><span><span class="keyword">val</span> is_quad_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Checks whether a field element is a quadratic residue.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inv" class="anchored"><a href="#val-inv" class="anchor"></a><code><span><span class="keyword">val</span> inv : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Sets a field element to be the (modular) inverse of another. Requires the input's magnitude to be at most 8. The output magnitude is 1 (but not guaranteed to be normalized).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inv_var" class="anchored"><a href="#val-inv_var" class="anchor"></a><code><span><span class="keyword">val</span> inv_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Potentially faster version of secp256k1_fe_inv, without constant-time guarantee.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inv_all_var" class="anchored"><a href="#val-inv_all_var" class="anchor"></a><code><span><span class="keyword">val</span> inv_all_var : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><span><a href="#type-t">t</a> list</span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Calculate the (modular) inverses of a batch of field elements. Requires the inputs' magnitudes to be at most 8. The output magnitudes are 1 (but not guaranteed to be normalized). The inputs and outputs must not overlap in memory.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_storage" class="anchored"><a href="#val-to_storage" class="anchor"></a><code><span><span class="keyword">val</span> to_storage : <span><a href="Storage/index.html#type-t">Storage.t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Convert a field element to the storage type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-from_storage" class="anchored"><a href="#val-from_storage" class="anchor"></a><code><span><span class="keyword">val</span> from_storage : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="Storage/index.html#type-t">Storage.t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Convert a field element back from the storage type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cmov" class="anchored"><a href="#val-cmov" class="anchor"></a><code><span><span class="keyword">val</span> cmov : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span>bool <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>If flag is true, set *r equal to *a; otherwise leave it. Constant-time.</p></div></div></div></body></html>