<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Compile (genspio.Genspio.Compile)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">genspio</a> &#x00BB; <a href="../index.html">Genspio</a> &#x00BB; Compile</nav><header class="odoc-preamble"><h1>Module <code><span>Genspio.Compile</span></code></h1><p>Compilers of the <code>EDSL</code>.t values.</p></header><nav class="odoc-toc"><ul><li><a href="#pretty-printing-output">Pretty-printing Output</a></li><li><a href="#compilation-to-posix-shell-scripts">Compilation to POSIX Shell Scripts</a></li><li><a href="#legacy-api">Legacy API</a></li></ul></nav><div class="odoc-content"><h4 id="pretty-printing-output"><a href="#pretty-printing-output" class="anchor"></a>Pretty-printing Output</h4><div class="odoc-spec"><div class="spec value" id="val-pp_hum" class="anchored"><a href="#val-pp_hum" class="anchor"></a><code><span><span class="keyword">val</span> pp_hum : <span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty print a Genspio expression with the <code>Format</code> module.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_string_hum" class="anchored"><a href="#val-to_string_hum" class="anchor"></a><code><span><span class="keyword">val</span> to_string_hum : <span><span><span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Pretty print a Genspio expression to <code>string</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_one_line_hum" class="anchored"><a href="#val-to_one_line_hum" class="anchor"></a><code><span><span class="keyword">val</span> to_one_line_hum : <span><span><span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Like <code>to_string_hum</code> but avoiding new-lines.</p></div></div><h4 id="compilation-to-posix-shell-scripts"><a href="#compilation-to-posix-shell-scripts" class="anchor"></a>Compilation to POSIX Shell Scripts</h4><div class="odoc-spec"><div class="spec module" id="module-To_posix" class="anchored"><a href="#module-To_posix" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="To_posix/index.html">To_posix</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Compiler from <a href="../EDSL/index.html#type-t"><code>EDSL.t</code></a> to POSIX shell scripts (one-liners or multiline scripts).</p></div></div><div class="odoc-spec"><div class="spec module" id="module-To_slow_flow" class="anchored"><a href="#module-To_slow_flow" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="To_slow_flow/index.html">To_slow_flow</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Compile <a href="../EDSL/index.html#type-t"><code>EDSL.t</code></a> values to much slower but more portable scripts (which use temporary-files).</p></div></div><h4 id="legacy-api"><a href="#legacy-api" class="anchor"></a>Legacy API</h4><p>These functions are here for backwards compatibility, please use now the <a href="To_posix/index.html"><code>To_posix</code></a> module.</p><div class="odoc-spec"><div class="spec value" id="val-default_max_argument_length" class="anchored"><a href="#val-default_max_argument_length" class="anchor"></a><code><span><span class="keyword">val</span> default_max_argument_length : <span>int option</span></span></code></div><div class="spec-doc"><p>See argument <code>?max_argument_length</code> of <a href="#val-to_one_liner"><code>to_one_liner</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_one_liner" class="anchored"><a href="#val-to_one_liner" class="anchor"></a><code><span><span class="keyword">val</span> to_one_liner : <span>?&#8288;max_argument_length:<span>int option</span> <span>&#45;&gt;</span></span> <span>?&#8288;no_trap:bool <span>&#45;&gt;</span></span>
<span><span><span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Compile a Genspio expression to a single-line POSIX shell command.</p><p>The shell command starts by using <code>&quot;trap&quot;</code> to allow the script to abort thorugh the <a href="../EDSL/index.html#val-fail"><code>EDSL.fail</code></a> construct; one can avoid this setup with <code>~no_trap:true</code></p><p>If <code>~no_trap:true</code> is used and the script used the <a href="../EDSL/index.html#val-fail"><code>EDSL.fail</code></a> construct, <code>to_one_liner</code> fails with an exception.</p><pre><code>utop # Genspio.Compile.to_one_liner
         ~no_trap:true
         Genspio.EDSL.(
           seq [
             eprintf (str &quot;Hello\\n&quot;) [];
             fail &quot;Foo&quot;
           ]);;
Exception:
Failure
 &quot;Error: Call to `fail (user Foo)` while no “die” command is configured.;
  Code: NONE; Comment-backtrace: [] &quot;.</code></pre><p>The default value for <code>max_argument_length</code> is <a href="#val-default_max_argument_length"><code>default_max_argument_length</code></a> (<code>Some 100_000</code>); it is a limit on the length of the literal command line arguments generated by the compiler. <code>None</code> means “do not check.”</p><p>If the compilation fails, the function raises a <code>Failure</code> exception containing the error message.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_many_lines" class="anchored"><a href="#val-to_many_lines" class="anchor"></a><code><span><span class="keyword">val</span> to_many_lines : <span>?&#8288;max_argument_length:<span>int option</span> <span>&#45;&gt;</span></span> <span>?&#8288;no_trap:bool <span>&#45;&gt;</span></span>
<span><span><span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Compile a Genspio expression to a multi-line POSIX shell script, slightly more readable than <a href="#val-to_one_liner"><code>to_one_liner</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-quick_run_exn" class="anchored"><a href="#val-quick_run_exn" class="anchor"></a><code><span><span class="keyword">val</span> quick_run_exn : <span>?&#8288;max_argument_length:<span>int option</span> <span>&#45;&gt;</span></span> <span>?&#8288;no_trap:bool <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Compile an expression and use <code>Sys.command</code> on it; if the overall command does not return 0 an exception is raised.</p></div></div></div></body></html>