<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>To_slow_flow (genspio.Genspio.Compile.To_slow_flow)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">genspio</a> &#x00BB; <a href="../../index.html">Genspio</a> &#x00BB; <a href="../index.html">Compile</a> &#x00BB; To_slow_flow</nav><header class="odoc-preamble"><h1>Module <code><span>Compile.To_slow_flow</span></code></h1><p>Compile <a href="../../EDSL/index.html#type-t"><code>EDSL.t</code></a> values to much slower but more portable scripts (which use temporary-files).</p><p>Usage example:</p><pre><code>let expression =
   Genspio.EDSL.(printf (str &quot;Hello %s\\n&quot;) [get_stdout (exec [&quot;whoami&quot;])])
in
let (compiled : Genspio.Compile.To_slow_flow.Script.t) =
   Genspio.Compile.To_slow_flow.compile expression
in
let outchan = open_out &quot;/tmp/my-script.sh&quot; in
Format.fprintf
  (Format.formatter_of_out_channel outchan)
  &quot;#!/bin/sh\n\n%a\n&quot;
  Genspio.Compile.To_slow_flow.Script.pp_posix compiled;
close_out outchan</code></pre></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Script" class="anchored"><a href="#module-Script" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Script/index.html">Script</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The result of <a href="#val-compile"><code>compile</code></a> function is a <a href="Script/index.html#type-t"><code>Script.t</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compile" class="anchored"><a href="#val-compile" class="anchor"></a><code><span><span class="keyword">val</span> compile : <span>?&#8288;default_tmpdir:<span>[ `Fresh <span><span>| `Use</span> of string</span> ]</span> <span>&#45;&gt;</span></span>
<span>?&#8288;signal_name:string <span>&#45;&gt;</span></span> <span>?&#8288;trap:<span>[ <span>`Exit_with of int</span> <span>| `None</span> ]</span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../EDSL/index.html#type-t">EDSL.t</a></span> <span>&#45;&gt;</span></span> <a href="Script/index.html#type-t">Script.t</a></span></code></div><div class="spec-doc"><p>Compile and <a href="../../EDSL/index.html#type-t"><code>EDSL.t</code></a> value to a script.</p><ul><li><code>?default_tmpdir</code>: set the value of the of the directory to create temporary files in, generated scripts still obey the <code>&quot;$TMPDIR&quot;</code> variable which takes precedence (default: <code>`Fresh</code> which means that it will create a fresh directory within <code>&quot;/tmp&quot;</code>).</li><li><code>?trap</code>: whether to setup a call to <code>&quot;trap&quot;</code> to handle the calls to <code>fail</code> (default: <code>`Exit_with 77</code>)).</li><li><code>?signal_name</code>: if <code>trap</code> is not <code>`None</code>, this is the signal to use to self-kill the script on calling <code>fail</code> (default: <code>&quot;USR1&quot;</code>).</li></ul></div></div></div></body></html>