<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_watcher (lwt-watcher.Lwt_watcher)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">lwt-watcher</a> &#x00BB; Lwt_watcher</nav><header class="odoc-preamble"><h1>Module <code><span>Lwt_watcher</span></code></h1><p>This module implements a one-to-many publish/suscribe pattern.</p><p>Clients can register/unregister to an <code>input</code>. Events notified to the input (through <code>notify</code>) are dispatched asynchronously to all registered clients through an <code>Lwt_stream</code>. A client receives only events sent after registration and before unregistration.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-input" class="anchored"><a href="#type-input" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a input</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create_input" class="anchored"><a href="#val-create_input" class="anchor"></a><code><span><span class="keyword">val</span> create_input : <span>unit <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-input">input</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-notify" class="anchored"><a href="#val-notify" class="anchor"></a><code><span><span class="keyword">val</span> notify : <span><span><span class="type-var">'a</span> <a href="#type-input">input</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>notify t v</code> publishes value v to the input t</p></div></div><div class="odoc-spec"><div class="spec type" id="type-stopper" class="anchored"><a href="#type-stopper" class="anchor"></a><code><span><span class="keyword">type</span> stopper</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create_stream" class="anchored"><a href="#val-create_stream" class="anchor"></a><code><span><span class="keyword">val</span> create_stream : <span><span><span class="type-var">'a</span> <a href="#type-input">input</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../lwt/Lwt_stream/index.html#type-t">Lwt_stream.t</a></span> * <a href="#type-stopper">stopper</a></span></code></div><div class="spec-doc"><p><code>create_stream t</code> registers a new client which can read published values via a stream. A <code>stopper</code> is used to shutdown the client.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_fake_stream" class="anchored"><a href="#val-create_fake_stream" class="anchor"></a><code><span><span class="keyword">val</span> create_fake_stream : <span>unit <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../lwt/Lwt_stream/index.html#type-t">Lwt_stream.t</a></span> * <a href="#type-stopper">stopper</a></span></code></div><div class="spec-doc"><p>A fake stream never receives any value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-shutdown" class="anchored"><a href="#val-shutdown" class="anchor"></a><code><span><span class="keyword">val</span> shutdown : <span><a href="#type-stopper">stopper</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>shutdown s</code> unregisters the client associated to <code>s</code>. <code>None</code> is pushed to the stream.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-shutdown_input" class="anchored"><a href="#val-shutdown_input" class="anchor"></a><code><span><span class="keyword">val</span> shutdown_input : <span><span><span class="type-var">'a</span> <a href="#type-input">input</a></span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Shutdowns all the clients of this input</p></div></div></div></body></html>