<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezos_p2p__P2p (tezos-p2p.Tezos_p2p__P2p)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">tezos-p2p</a> &#x00BB; Tezos_p2p__P2p</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_p2p__P2p</span></code></h1><p>Tezos P2p layer - Dynamic overlay network of authenticated peers.</p><p>The P2P layer implements several mechanisms, notably:</p><ul><li>It maintains pools of known points (P2P servers), peers (authenticated P2P servers), connections,</li><li>it implements an &quot;administrative&quot; protocol for maintaining the network topology,</li><li>it regulates bandwidth usage between connections,</li><li>it implements an authentication / session agreement protocol,</li><li>it can ban or greylist peers or IP addresses who don't behave well,</li><li>it offers the ability to the upper-layer to send, broadcast, or receive messages.</li></ul><p>The protocol sends/receives messages to maintain the network topology, and also &quot;generic&quot; application messages that can be sent and received by the upper-layer. See <code>P2p_message</code>.</p><p>The protocol may operate in *private* mode, in which only user-provided points (a.k.a. *trusted* ) are used. In particular, points advertisements and swap requests messages are ignored.</p><p>The module <code>P2p_pool</code> maintains pools of points, peers and connections.</p><p>Several workers are used:</p><ul><li><code>P2p_maintenance</code> tries to regulate the number of connections</li><li><code>P2p_welcome</code> waits for incoming connections</li><li><code>P2p_discovery</code> looks for points on the local network via UDP messages</li><li>A protocol worker implements the messaging protocol</li></ul><p>Points can be trusted. This is relevant in private mode (see above), but generally peers shouldn't advertise trusted points.</p><p>Addresses and peers can be *banned* (a.k.a. blacklisted). In which case, connections to and from them should be ignored.</p><p>Addresses or peers can be *greylisted*. As for banning, greylisting can be enforced via the API, but also dynamically when the peer isn't able to authenticate. Eventually greylisted peers are whitelisted again.</p><p>Many types used in the P2p layer are parameterized by three type parameters:</p><ul><li><code>'msg</code>: type of messages exchanged between peers</li><li><code>'peer_meta</code>: type of the metadata associated with peers (score, etc.)</li><li><code>'conn_meta</code>: type of the metadata associated with connections</li></ul><p>The concrete types, and functions operating on them, are defined by the calling layer, and passed to <code>P2p.create</code>. See module <code>P2p_params</code>.</p></header><div class="odoc-content"></div></body></html>