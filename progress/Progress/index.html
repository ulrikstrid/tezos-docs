<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Progress (progress.Progress)</title><link rel="stylesheet" href="../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">progress</a> &#x00BB; Progress</nav><header class="odoc-preamble"><h1>Module <code><span>Progress</span></code></h1><p>A library for displaying progress bars, including support for rendering multiple bars at once. Start by <a href="#description">describing</a> of a set of progress bars, then begin <a href="#rendering">rendering</a> them to get access to their respective reporting functions.</p><p>See <a href="../Progress_unix/index.html"><code>Progress_unix</code></a> for access to Unix-specific utilities.</p></header><nav class="odoc-toc"><ul><li><a href="#description">Description</a><ul><li><a href="#multiple-progress-bars">Multiple progress bars</a></li></ul></li><li><a href="#rendering">Rendering</a></li><li><a href="#miscellaneous">Miscellaneous</a></li></ul></nav><div class="odoc-content"><h2 id="description"><a href="#description" class="anchor"></a>Description</h2><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>The type of progress bars with reporting functions of type <code>'a</code>. You'll get access to the reporting functions when beginning the <a href="#rendering">rendering</a> process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-counter" class="anchored"><a href="#val-counter" class="anchor"></a><code><span><span class="keyword">val</span> counter : <span>total:int64 <span>&#45;&gt;</span></span> <span>?&#8288;mode:<span>[ `ASCII <span>| `UTF8</span> ]</span> <span>&#45;&gt;</span></span> <span>?&#8288;message:string <span>&#45;&gt;</span></span>
<span>?&#8288;pp:<span><span>(int64, <span>int64 <a href="Segment/index.html#type-t">Segment.t</a></span>)</span> <a href="Units/index.html#type-pp_fixed">Units.pp_fixed</a></span> <span>&#45;&gt;</span></span> <span>?&#8288;width:int <span>&#45;&gt;</span></span> <span>?&#8288;sampling_interval:int <span>&#45;&gt;</span></span>
<span>unit <span>&#45;&gt;</span></span> <span><span>(<span>int64 <span>&#45;&gt;</span></span> unit)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>counter ~total ()</code> is a progress bar of the form:</p><pre><code>&lt;message?&gt;  &lt;count?&gt;  [########..............................]  XX% </code></pre><p>where each reported value contributes cumulatively towards an eventual total of <code>total</code>. Optional parameters are as follows:</p><ul><li><code>?mode</code> specifies whether to use a UTF-8 or an ASCII encoding for the progress bar. The UTF-8 encoding shows a higher resolution of progress, but may not be supported in all terminals. The default is <code>`ASCII</code>.</li></ul><ul><li><code>?pp</code> is used to pretty-print the <code>&lt;count&gt;</code> segment, if passed. For example, <a href="Units/index.html#val-bytes"><code>Units.bytes</code></a> can be used for totals measured in bytes. The default is to not display this segment.</li></ul><ul><li><code>?width</code> is the width of the bar in columns. Defaults to the width of <code>stdout</code>, if it is a terminal.</li></ul><ul><li><code>?sampling_interval</code> specifies the number of reported values that must be passed for each update of the display (not including the update during finalisation, which always occurs). This is useful when progress is being reported from a hot-loop, where the cost of re-displaying the progress bar is non-negligible. The default value is <code>1</code>, meaning that all updates are displayed immediately.</li></ul><p>See <a href="../Progress_unix/index.html#val-counter"><code>Progress_unix.counter</code></a> for an equivalent that contains a timer.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Segment" class="anchored"><a href="#module-Segment" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Segment/index.html">Segment</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Segment</code> contains a DSL for defining custom progress bars.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>init:<span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="Segment/index.html#type-t">Segment.t</a></span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Define a new progress bar from a specification, with the given initial value.</p></div></div><h3 id="multiple-progress-bars"><a href="#multiple-progress-bars" class="anchor"></a>Multiple progress bars</h3><div class="odoc-spec"><div class="spec value" id="val-(/)" class="anchored"><a href="#val-(/)" class="anchor"></a><code><span><span class="keyword">val</span> (/) : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Stack progress bars vertically. <code>a / b</code> is a set with <code>a</code> stacked on top of <code>b</code>. The two bars have separate reporting functions (supplied as a pair).</p></div></div><h2 id="rendering"><a href="#rendering" class="anchor"></a>Rendering</h2><div class="odoc-spec"><div class="spec value" id="val-with_reporters" class="anchored"><a href="#val-with_reporters" class="anchor"></a><code><span><span class="keyword">val</span> with_reporters : <span>?&#8288;ppf:<a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>Render a set of progress bars inside a continuation.</p><dl><dt>parameter ppf</dt><dd><p>Defaults to <code>Format</code>.err_formatter if <code>stderr</code> is a TTY, and is a noop formatter otherwise.</p></dd></dl></div></div><p>Functions for explicitly starting and stopping the process of rendering a bar; useful when the code doing the progress reporting cannot be conveniently delimited inside <code>with_display</code>. All <a href="#type-display"><code>display</code></a>s must be properly <a href="#val-finalise"><code>finalise</code></a>d, and it is not possible to interleave rendering of displays.</p><div class="odoc-spec"><div class="spec type" id="type-display" class="anchored"><a href="#type-display" class="anchor"></a><code><span><span class="keyword">type</span> display</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-start" class="anchored"><a href="#val-start" class="anchor"></a><code><span><span class="keyword">val</span> start : <span>?&#8288;ppf:<a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span>&#45;&gt;</span></span> <span class="type-var">'a</span> * <a href="#type-display">display</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-finalise" class="anchored"><a href="#val-finalise" class="anchor"></a><code><span><span class="keyword">val</span> finalise : <span><a href="#type-display">display</a> <span>&#45;&gt;</span></span> unit</span></code></div></div><h2 id="miscellaneous"><a href="#miscellaneous" class="anchor"></a>Miscellaneous</h2><div class="odoc-spec"><div class="spec module" id="module-Units" class="anchored"><a href="#module-Units" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Units/index.html">Units</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Helpers for printing values of various units.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Internal" class="anchored"><a href="#module-Internal" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Internal/index.html">Internal</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Internals of the library exported to be used in sibling packages and in testing. Not intended for public consumption, and does not provide a stable API.</p></div></div></div></body></html>