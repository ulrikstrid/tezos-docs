<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Json_schema (json-data-encoding.Json_schema)</title><link rel="stylesheet" href="../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">json-data-encoding</a> &#x00BB; Json_schema</nav><header class="odoc-preamble"><h1>Module <code><span>Json_schema</span></code></h1><h3 id="abstract-representation-of-schemas"><a href="#abstract-representation-of-schemas" class="anchor"></a>Abstract representation of schemas</h3></header><nav class="odoc-toc"><ul><li><a href="#combinators-to-build-schemas-and-elements">Combinators to build schemas and elements</a></li><li><a href="#named-definitions">Named definitions</a></li><li><a href="#predefined-values">Predefined values</a></li><li><a href="#json-serialization">JSON Serialization</a></li><li><a href="#errors">Errors</a></li><li><a href="#advanced-interface-for-using-a-custom-json-representation">Advanced interface for using a custom JSON representation</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-schema" class="anchored"><a href="#type-schema" class="anchor"></a><code><span><span class="keyword">type</span> schema</span></code></div><div class="spec-doc"><p>A JSON schema root.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-element" class="anchored"><a href="#type-element" class="anchor"></a><code><span><span class="keyword">and</span> element</span><span> = </span><span>{</span></code><table><tr id="type-element.title" class="anchored"><td class="def record field"><a href="#type-element.title" class="anchor"></a><code><span>title : <span>string option</span>;</span></code></td><td class="doc"><p>An optional short description.</p></td></tr><tr id="type-element.description" class="anchored"><td class="def record field"><a href="#type-element.description" class="anchor"></a><code><span>description : <span>string option</span>;</span></code></td><td class="doc"><p>An optional long description.</p></td></tr><tr id="type-element.default" class="anchored"><td class="def record field"><a href="#type-element.default" class="anchor"></a><code><span>default : <span><a href="../Json_repr/index.html#type-any">Json_repr.any</a> option</span>;</span></code></td><td class="doc"><p>A default constant to be substituted in case of a missing value.</p></td></tr><tr id="type-element.enum" class="anchored"><td class="def record field"><a href="#type-element.enum" class="anchor"></a><code><span>enum : <span><span><a href="../Json_repr/index.html#type-any">Json_repr.any</a> list</span> option</span>;</span></code></td><td class="doc"><p>A valid value must equal one of these constants.</p></td></tr><tr id="type-element.kind" class="anchored"><td class="def record field"><a href="#type-element.kind" class="anchor"></a><code><span>kind : <a href="#type-element_kind">element_kind</a>;</span></code></td><td class="doc"><p>The type-specific part.</p></td></tr><tr id="type-element.format" class="anchored"><td class="def record field"><a href="#type-element.format" class="anchor"></a><code><span>format : <span>string option</span>;</span></code></td><td class="doc"><p>predefined formats such as <code>date-time</code>, <code>email</code>, <code>ipv4</code>, <code>ipv6</code>, <code>uri</code>.</p></td></tr><tr id="type-element.id" class="anchored"><td class="def record field"><a href="#type-element.id" class="anchor"></a><code><span>id : <span>string option</span>;</span></code></td><td class="doc"><p>An optional ID.</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>A node in the schema, embeds all type-agnostic specs.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-element_kind" class="anchored"><a href="#type-element_kind" class="anchor"></a><code><span><span class="keyword">and</span> element_kind</span><span> = </span></code><table><tr id="type-element_kind.Object" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Object" class="anchor"></a><code><span>| </span><span><span class="constructor">Object</span> <span class="keyword">of</span> <a href="#type-object_specs">object_specs</a></span></code></td><td class="doc"><p>The type of an object.</p></td></tr><tr id="type-element_kind.Array" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Array" class="anchor"></a><code><span>| </span><span><span class="constructor">Array</span> <span class="keyword">of</span> <span><a href="#type-element">element</a> list</span> * <a href="#type-array_specs">array_specs</a></span></code></td><td class="doc"><p>An fixed-length array with the types of its elements (a tuple).</p></td></tr><tr id="type-element_kind.Monomorphic_array" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Monomorphic_array" class="anchor"></a><code><span>| </span><span><span class="constructor">Monomorphic_array</span> <span class="keyword">of</span> <a href="#type-element">element</a> * <a href="#type-array_specs">array_specs</a></span></code></td><td class="doc"><p>A variable-length array with the type of its children.</p></td></tr><tr id="type-element_kind.Combine" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Combine" class="anchor"></a><code><span>| </span><span><span class="constructor">Combine</span> <span class="keyword">of</span> <a href="#type-combinator">combinator</a> * <span><a href="#type-element">element</a> list</span></span></code></td><td class="doc"><p>A mix of schemas using logical combinators.</p></td></tr><tr id="type-element_kind.Def_ref" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Def_ref" class="anchor"></a><code><span>| </span><span><span class="constructor">Def_ref</span> <span class="keyword">of</span> <a href="../Json_query/index.html#type-path">Json_query.path</a></span></code></td><td class="doc"><p>A ref to an element from its path in the JSON representation.</p></td></tr><tr id="type-element_kind.Id_ref" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Id_ref" class="anchor"></a><code><span>| </span><span><span class="constructor">Id_ref</span> <span class="keyword">of</span> string</span></code></td><td class="doc"><p>A ref to an element from its ID.</p></td></tr><tr id="type-element_kind.Ext_ref" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Ext_ref" class="anchor"></a><code><span>| </span><span><span class="constructor">Ext_ref</span> <span class="keyword">of</span> <a href="../../uri/Uri/index.html#type-t">Uri.t</a></span></code></td><td class="doc"><p>A ref to an external element.</p></td></tr><tr id="type-element_kind.String" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.String" class="anchor"></a><code><span>| </span><span><span class="constructor">String</span> <span class="keyword">of</span> <a href="#type-string_specs">string_specs</a></span></code></td><td class="doc"><p>A string (with optional characteristics).</p></td></tr><tr id="type-element_kind.Integer" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Integer" class="anchor"></a><code><span>| </span><span><span class="constructor">Integer</span> <span class="keyword">of</span> <a href="#type-numeric_specs">numeric_specs</a></span></code></td><td class="doc"><p>An int (with optional characteristics).</p></td></tr><tr id="type-element_kind.Number" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Number" class="anchor"></a><code><span>| </span><span><span class="constructor">Number</span> <span class="keyword">of</span> <a href="#type-numeric_specs">numeric_specs</a></span></code></td><td class="doc"><p>A float (with optional characteristics).</p></td></tr><tr id="type-element_kind.Boolean" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Boolean" class="anchor"></a><code><span>| </span><span><span class="constructor">Boolean</span></span></code></td><td class="doc"><p>Any boolean.</p></td></tr><tr id="type-element_kind.Null" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Null" class="anchor"></a><code><span>| </span><span><span class="constructor">Null</span></span></code></td><td class="doc"><p>The null value.</p></td></tr><tr id="type-element_kind.Any" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Any" class="anchor"></a><code><span>| </span><span><span class="constructor">Any</span></span></code></td><td class="doc"><p>Any JSON value.</p></td></tr><tr id="type-element_kind.Dummy" class="anchored"><td class="def variant constructor"><a href="#type-element_kind.Dummy" class="anchor"></a><code><span>| </span><span><span class="constructor">Dummy</span></span></code></td><td class="doc"><p>For building cyclic definitions, a definition bound to a dummy will be considered absent for <a href="#val-add_definition"><code>add_definition</code></a> but present for <a href="#val-update"><code>update</code></a>. The idea is to insert a dummy definition, build a cyclic structure using it for recursion, and finally update the definition with the structure.</p></td></tr></table></div><div class="spec-doc"><p>The type-specific part of schema nodes.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-combinator" class="anchored"><a href="#type-combinator" class="anchor"></a><code><span><span class="keyword">and</span> combinator</span><span> = </span></code><table><tr id="type-combinator.Any_of" class="anchored"><td class="def variant constructor"><a href="#type-combinator.Any_of" class="anchor"></a><code><span>| </span><span><span class="constructor">Any_of</span></span></code></td><td class="doc"><p>Logical OR n-ary combinator.</p></td></tr><tr id="type-combinator.One_of" class="anchored"><td class="def variant constructor"><a href="#type-combinator.One_of" class="anchor"></a><code><span>| </span><span><span class="constructor">One_of</span></span></code></td><td class="doc"><p>Logical XOR n-ary combinator.</p></td></tr><tr id="type-combinator.All_of" class="anchored"><td class="def variant constructor"><a href="#type-combinator.All_of" class="anchor"></a><code><span>| </span><span><span class="constructor">All_of</span></span></code></td><td class="doc"><p>Logical AND n-ary combinator.</p></td></tr><tr id="type-combinator.Not" class="anchored"><td class="def variant constructor"><a href="#type-combinator.Not" class="anchor"></a><code><span>| </span><span><span class="constructor">Not</span></span></code></td><td class="doc"><p>Logical NOT unary combinator.</p></td></tr></table></div><div class="spec-doc"><p>Grammar combinators.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-array_specs" class="anchored"><a href="#type-array_specs" class="anchor"></a><code><span><span class="keyword">and</span> array_specs</span><span> = </span><span>{</span></code><table><tr id="type-array_specs.min_items" class="anchored"><td class="def record field"><a href="#type-array_specs.min_items" class="anchor"></a><code><span>min_items : int;</span></code></td><td class="doc"><p>The minimum number of elements.</p></td></tr><tr id="type-array_specs.max_items" class="anchored"><td class="def record field"><a href="#type-array_specs.max_items" class="anchor"></a><code><span>max_items : <span>int option</span>;</span></code></td><td class="doc"><p>The maximum number of elements.</p></td></tr><tr id="type-array_specs.unique_items" class="anchored"><td class="def record field"><a href="#type-array_specs.unique_items" class="anchor"></a><code><span>unique_items : bool;</span></code></td><td class="doc"><p>Teels if all elements must be different.</p></td></tr><tr id="type-array_specs.additional_items" class="anchored"><td class="def record field"><a href="#type-array_specs.additional_items" class="anchor"></a><code><span>additional_items : <span><a href="#type-element">element</a> option</span>;</span></code></td><td class="doc"><p>The type of additional items, if allowed.</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Parameters of the <code>Array</code> and <code>MonomorphicArray</code> type specifiers.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-numeric_specs" class="anchored"><a href="#type-numeric_specs" class="anchor"></a><code><span><span class="keyword">and</span> numeric_specs</span><span> = </span><span>{</span></code><table><tr id="type-numeric_specs.multiple_of" class="anchored"><td class="def record field"><a href="#type-numeric_specs.multiple_of" class="anchor"></a><code><span>multiple_of : <span>float option</span>;</span></code></td><td class="doc"><p>An optional divisor of valid values</p></td></tr><tr id="type-numeric_specs.minimum" class="anchored"><td class="def record field"><a href="#type-numeric_specs.minimum" class="anchor"></a><code><span>minimum : <span><span>(float * <span>[ `Inclusive <span>| `Exclusive</span> ]</span>)</span> option</span>;</span></code></td><td class="doc"><p>The optional lower bound of the numeric range</p></td></tr><tr id="type-numeric_specs.maximum" class="anchored"><td class="def record field"><a href="#type-numeric_specs.maximum" class="anchor"></a><code><span>maximum : <span><span>(float * <span>[ `Inclusive <span>| `Exclusive</span> ]</span>)</span> option</span>;</span></code></td><td class="doc"><p>The optional upper bound of the numeric range</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Parameters of the <code>Integer</code> and <code>Number</code> type specifiers.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-object_specs" class="anchored"><a href="#type-object_specs" class="anchor"></a><code><span><span class="keyword">and</span> object_specs</span><span> = </span><span>{</span></code><table><tr id="type-object_specs.properties" class="anchored"><td class="def record field"><a href="#type-object_specs.properties" class="anchor"></a><code><span>properties : <span><span>(string * <a href="#type-element">element</a> * bool * <span><a href="../Json_repr/index.html#type-any">Json_repr.any</a> option</span>)</span> list</span>;</span></code></td><td class="doc"><p>The names and types of properties, with a flag to indicate if they are required (<code>true</code>) or optional.</p></td></tr><tr id="type-object_specs.pattern_properties" class="anchored"><td class="def record field"><a href="#type-object_specs.pattern_properties" class="anchor"></a><code><span>pattern_properties : <span><span>(string * <a href="#type-element">element</a>)</span> list</span>;</span></code></td><td class="doc"><p>Alternative definition of properties, matching field names using regexps instead of constant strings.</p></td></tr><tr id="type-object_specs.additional_properties" class="anchored"><td class="def record field"><a href="#type-object_specs.additional_properties" class="anchor"></a><code><span>additional_properties : <span><a href="#type-element">element</a> option</span>;</span></code></td><td class="doc"><p>The type of additional properties, if allowed.</p></td></tr><tr id="type-object_specs.min_properties" class="anchored"><td class="def record field"><a href="#type-object_specs.min_properties" class="anchor"></a><code><span>min_properties : int;</span></code></td><td class="doc"><p>The minimum number of properties.</p></td></tr><tr id="type-object_specs.max_properties" class="anchored"><td class="def record field"><a href="#type-object_specs.max_properties" class="anchor"></a><code><span>max_properties : <span>int option</span>;</span></code></td><td class="doc"><p>The maximum number of properties.</p></td></tr><tr id="type-object_specs.schema_dependencies" class="anchored"><td class="def record field"><a href="#type-object_specs.schema_dependencies" class="anchor"></a><code><span>schema_dependencies : <span><span>(string * <a href="#type-element">element</a>)</span> list</span>;</span></code></td><td class="doc"><p>Additional schemas the value must verify if a property is present (property, additional schema).</p></td></tr><tr id="type-object_specs.property_dependencies" class="anchored"><td class="def record field"><a href="#type-object_specs.property_dependencies" class="anchor"></a><code><span>property_dependencies : <span><span>(string * <span>string list</span>)</span> list</span>;</span></code></td><td class="doc"><p>Additional properties required whenever some property is present (property, additional properties).</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Parameters of the <code>Object</code> type specifier.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-string_specs" class="anchored"><a href="#type-string_specs" class="anchor"></a><code><span><span class="keyword">and</span> string_specs</span><span> = </span><span>{</span></code><table><tr id="type-string_specs.pattern" class="anchored"><td class="def record field"><a href="#type-string_specs.pattern" class="anchor"></a><code><span>pattern : <span>string option</span>;</span></code></td><td class="doc"><p>A regexp the string must conform to.</p></td></tr><tr id="type-string_specs.min_length" class="anchored"><td class="def record field"><a href="#type-string_specs.min_length" class="anchor"></a><code><span>min_length : int;</span></code></td><td class="doc"><p>The minimum string length.</p></td></tr><tr id="type-string_specs.max_length" class="anchored"><td class="def record field"><a href="#type-string_specs.max_length" class="anchor"></a><code><span>max_length : <span>int option</span>;</span></code></td><td class="doc"><p>The maximum string length.</p></td></tr><tr id="type-string_specs.str_format" class="anchored"><td class="def record field"><a href="#type-string_specs.str_format" class="anchor"></a><code><span>str_format : <span>string option</span>;</span></code></td><td class="doc"><p>Special format of the string (cf <a href="https://json-schema.org/understanding-json-schema/reference/string.html#format">json schema documentation</a>).</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Parameters of the <code>String</code> type specifier.</p></div></div><h3 id="combinators-to-build-schemas-and-elements"><a href="#combinators-to-build-schemas-and-elements" class="anchor"></a>Combinators to build schemas and elements</h3><div class="odoc-spec"><div class="spec value" id="val-element" class="anchored"><a href="#val-element" class="anchor"></a><code><span><span class="keyword">val</span> element : <span><a href="#type-element_kind">element_kind</a> <span>&#45;&gt;</span></span> <a href="#type-element">element</a></span></code></div><div class="spec-doc"><p>Construct a naked element (all optional properties to None).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><a href="#type-element">element</a> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Construct a schema from its root, without any definition ; the element is checked not to contain any <code>Def</code> element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-root" class="anchored"><a href="#val-root" class="anchor"></a><code><span><span class="keyword">val</span> root : <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> <a href="#type-element">element</a></span></code></div><div class="spec-doc"><p>Extract the root element from an existing schema.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update" class="anchored"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><a href="#type-element">element</a> <span>&#45;&gt;</span></span> <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Update a schema from its root, using the definitions from an existing schema ; the element is checked to contain only valid <code>Def</code> elements ; unused definitions are kept, see <a href="#val-simplify"><code>simplify</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-self" class="anchored"><a href="#val-self" class="anchor"></a><code><span><span class="keyword">val</span> self : <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Describes the implemented schema specification as a schema.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-any" class="anchored"><a href="#val-any" class="anchor"></a><code><span><span class="keyword">val</span> any : <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>A completely generic schema, without any definition.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-combine" class="anchored"><a href="#val-combine" class="anchor"></a><code><span><span class="keyword">val</span> combine : <span><a href="#type-combinator">combinator</a> <span>&#45;&gt;</span></span> <span><span><a href="#type-schema">schema</a> list</span> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Combines several schemas.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_nullable" class="anchored"><a href="#val-is_nullable" class="anchor"></a><code><span><span class="keyword">val</span> is_nullable : <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Tells is a schema accepts null.</p></div></div><h3 id="named-definitions"><a href="#named-definitions" class="anchor"></a>Named definitions</h3><div class="odoc-spec"><div class="spec value" id="val-merge_definitions" class="anchored"><a href="#val-merge_definitions" class="anchor"></a><code><span><span class="keyword">val</span> merge_definitions : <span><span>(<a href="#type-schema">schema</a> * <a href="#type-schema">schema</a>)</span> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a> * <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Merges the definitions of two schemas if possible and returns the updated schemas, so that their elements can be mixed without introducing dangling references ; if two different definitions are bound to the same path, <a href="#exception-Duplicate_definition"><code>Duplicate_definition</code></a> will be raised.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-simplify" class="anchored"><a href="#val-simplify" class="anchor"></a><code><span><span class="keyword">val</span> simplify : <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Remove the definitions that are not present in the schema.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_definition" class="anchored"><a href="#val-add_definition" class="anchor"></a><code><span><span class="keyword">val</span> add_definition : <span>?&#8288;definitions_path:string <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><a href="#type-element">element</a> <span>&#45;&gt;</span></span> <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a> * <a href="#type-element">element</a></span></code></div><div class="spec-doc"><p>Adds a definition by its path. If the path is absolute (starting with a <code>'/'</code>), it is untouched. Otherwise, it is considered relative to <code>&quot;#/definitions&quot;</code> as recommended by the standard. May raise <a href="#exception-Duplicate_definition"><code>Duplicate_definition</code></a> if this path is already used or any error raised by <code>Json_repr</code>.path_of_json_pointer with <code>~wildcards:false</code>. Returns the modified schema and the <code>Def_ref</code> node that references this definition to be used in the schema.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-find_definition" class="anchored"><a href="#val-find_definition" class="anchor"></a><code><span><span class="keyword">val</span> find_definition : <span>?&#8288;definitions_path:string <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> <a href="#type-element">element</a></span></code></div><div class="spec-doc"><p>Finds a definition by its path, may raise <code>Not_found</code>. See <a href="#val-add_definition"><code>add_definition</code></a> for the name format.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-definition_exists" class="anchored"><a href="#val-definition_exists" class="anchor"></a><code><span><span class="keyword">val</span> definition_exists : <span>?&#8288;definitions_path:string <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Tells if a path leads to a definition. See <a href="#val-add_definition"><code>add_definition</code></a> for the name format.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-definition_ref" class="anchored"><a href="#val-definition_ref" class="anchor"></a><code><span><span class="keyword">val</span> definition_ref : <span>?&#8288;definitions_path:string <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <a href="#type-element">element</a></span></code></div><div class="spec-doc"><p>Build a reference to a definition. See <a href="#val-add_definition"><code>add_definition</code></a> for the name format.</p></div></div><h3 id="predefined-values"><a href="#predefined-values" class="anchor"></a>Predefined values</h3><div class="odoc-spec"><div class="spec value" id="val-array_specs" class="anchored"><a href="#val-array_specs" class="anchor"></a><code><span><span class="keyword">val</span> array_specs : <a href="#type-array_specs">array_specs</a></span></code></div><div class="spec-doc"><p>Default Parameters of the <code>Array</code> and <code>MonomorphicArray</code> type specifiers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-object_specs" class="anchored"><a href="#val-object_specs" class="anchor"></a><code><span><span class="keyword">val</span> object_specs : <a href="#type-object_specs">object_specs</a></span></code></div><div class="spec-doc"><p>Default parameters of the <code>Object</code> type specifier.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string_specs" class="anchored"><a href="#val-string_specs" class="anchor"></a><code><span><span class="keyword">val</span> string_specs : <a href="#type-string_specs">string_specs</a></span></code></div><div class="spec-doc"><p>Default parameters of the <code>String</code> type specifier.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-numeric_specs" class="anchored"><a href="#val-numeric_specs" class="anchor"></a><code><span><span class="keyword">val</span> numeric_specs : <a href="#type-numeric_specs">numeric_specs</a></span></code></div><div class="spec-doc"><p>Default parameters of the <code>Integer</code> and <code>Number</code> type specifiers.</p></div></div><h3 id="json-serialization"><a href="#json-serialization" class="anchor"></a>JSON Serialization</h3><div class="odoc-spec"><div class="spec value" id="val-to_json" class="anchored"><a href="#val-to_json" class="anchor"></a><code><span><span class="keyword">val</span> to_json : <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> <a href="../Json_repr/index.html#type-ezjsonm">Json_repr.ezjsonm</a></span></code></div><div class="spec-doc"><p>Formats a JSON schema as its JSON representation.</p><p>This function works with JSON data represented in the <a href="../Json_repr/index.html#type-ezjsonm"><code>Json_repr.ezjsonm</code></a> format. See functor <a href="Make/index.html"><code>Make</code></a> for using another representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_json" class="anchored"><a href="#val-of_json" class="anchor"></a><code><span><span class="keyword">val</span> of_json : <span>?&#8288;definitions_path:string <span>&#45;&gt;</span></span> <span><a href="../Json_repr/index.html#type-ezjsonm">Json_repr.ezjsonm</a> <span>&#45;&gt;</span></span> <a href="#type-schema">schema</a></span></code></div><div class="spec-doc"><p>Parse a JSON structure as a JSON schema, if possible. May throw <a href="#exception-Cannot_parse"><code>Cannot_parse</code></a>.</p><p>This function works with JSON data represented in the <a href="../Json_repr/index.html#type-ezjsonm"><code>Json_repr.ezjsonm</code></a> format. See functor <a href="Make/index.html"><code>Make</code></a> for using another representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><a href="#type-schema">schema</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Formats a JSON schema in human readable format.</p></div></div><h3 id="errors"><a href="#errors" class="anchor"></a>Errors</h3><div class="odoc-spec"><div class="spec exception" id="exception-Cannot_parse" class="anchored"><a href="#exception-Cannot_parse" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Cannot_parse</span> <span class="keyword">of</span> <a href="../Json_query/index.html#type-path">Json_query.path</a> * exn</span></code></div><div class="spec-doc"><p>An error happened during parsing. May box one of the following exceptions, among others..</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Dangling_reference" class="anchored"><a href="#exception-Dangling_reference" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Dangling_reference</span> <span class="keyword">of</span> <a href="../../uri/Uri/index.html#type-t">Uri.t</a></span></code></div><div class="spec-doc"><p>A reference to a non-existent location was detected.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Bad_reference" class="anchored"><a href="#exception-Bad_reference" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Bad_reference</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>A reference litteral could not be understood.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Unexpected" class="anchored"><a href="#exception-Unexpected" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Unexpected</span> <span class="keyword">of</span> string * string</span></code></div><div class="spec-doc"><p>An unexpected kind of JSON value was encountered.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Duplicate_definition" class="anchored"><a href="#exception-Duplicate_definition" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Duplicate_definition</span> <span class="keyword">of</span> <a href="../Json_query/index.html#type-path">Json_query.path</a> * <a href="#type-element">element</a> * <a href="#type-element">element</a></span></code></div><div class="spec-doc"><p>A non-<code>Dummy</code> definition appeared twice on insertion or merge.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_error" class="anchored"><a href="#val-print_error" class="anchor"></a><code><span><span class="keyword">val</span> print_error : <span>?&#8288;print_unknown:<span>(<span><a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span>exn <span>&#45;&gt;</span></span> unit)</span> <span>&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span>exn <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Produces a human readable version of an error.</p></div></div><h3 id="advanced-interface-for-using-a-custom-json-representation"><a href="#advanced-interface-for-using-a-custom-json-representation" class="anchor"></a>Advanced interface for using a custom JSON representation</h3><div class="odoc-spec"><div class="spec module" id="module-Make" class="anchored"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-Repr/index.html">Repr</a> : <a href="../Json_repr/module-type-Repr/index.html">Json_repr.Repr</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>