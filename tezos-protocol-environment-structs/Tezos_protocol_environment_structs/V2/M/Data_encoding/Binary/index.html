<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Binary (tezos-protocol-environment-structs.Tezos_protocol_environment_structs.V2.M.Data_encoding.Binary)</title><link rel="stylesheet" href="../../../../../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../../../index.html">tezos-protocol-environment-structs</a> &#x00BB; <a href="../../../../index.html">Tezos_protocol_environment_structs</a> &#x00BB; <a href="../../../index.html">V2</a> &#x00BB; <a href="../../index.html">M</a> &#x00BB; <a href="../index.html">Data_encoding</a> &#x00BB; Binary</nav><header class="odoc-preamble"><h1>Module <code><span>Data_encoding.Binary</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../../../../../data-encoding/Data_encoding/Binary/index.html">Data_encoding.Binary</a> <span class="keyword">end</span></span></code></span></summary><div class="odoc-spec"><div class="spec type" id="type-read_error" class="anchored"><a href="#type-read_error" class="anchor"></a><code><span><span class="keyword">type</span> read_error</span><span> = <a href="../../../../../../data-encoding/Data_encoding/Binary/index.html#type-read_error">Data_encoding.Binary.read_error</a></span><span> = </span></code><table><tr id="type-read_error.Not_enough_data" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Not_enough_data" class="anchor"></a><code><span>| </span><span><span class="constructor">Not_enough_data</span></span></code></td></tr><tr id="type-read_error.Extra_bytes" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Extra_bytes" class="anchor"></a><code><span>| </span><span><span class="constructor">Extra_bytes</span></span></code></td></tr><tr id="type-read_error.No_case_matched" class="anchored"><td class="def variant constructor"><a href="#type-read_error.No_case_matched" class="anchor"></a><code><span>| </span><span><span class="constructor">No_case_matched</span></span></code></td></tr><tr id="type-read_error.Unexpected_tag" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Unexpected_tag" class="anchor"></a><code><span>| </span><span><span class="constructor">Unexpected_tag</span> <span class="keyword">of</span> int</span></code></td></tr><tr id="type-read_error.Invalid_size" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Invalid_size" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_size</span> <span class="keyword">of</span> int</span></code></td></tr><tr id="type-read_error.Invalid_int" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Invalid_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_int</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-read_error.min" class="anchored"><td class="def record field"><a href="#type-read_error.min" class="anchor"></a><code><span>min : int;</span></code></td></tr><tr id="type-read_error.v" class="anchored"><td class="def record field"><a href="#type-read_error.v" class="anchor"></a><code><span>v : int;</span></code></td></tr><tr id="type-read_error.max" class="anchored"><td class="def record field"><a href="#type-read_error.max" class="anchor"></a><code><span>max : int;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-read_error.Invalid_float" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Invalid_float" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_float</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-read_error.min" class="anchored"><td class="def record field"><a href="#type-read_error.min" class="anchor"></a><code><span>min : float;</span></code></td></tr><tr id="type-read_error.v" class="anchored"><td class="def record field"><a href="#type-read_error.v" class="anchor"></a><code><span>v : float;</span></code></td></tr><tr id="type-read_error.max" class="anchored"><td class="def record field"><a href="#type-read_error.max" class="anchor"></a><code><span>max : float;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-read_error.Trailing_zero" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Trailing_zero" class="anchor"></a><code><span>| </span><span><span class="constructor">Trailing_zero</span></span></code></td></tr><tr id="type-read_error.Size_limit_exceeded" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Size_limit_exceeded" class="anchor"></a><code><span>| </span><span><span class="constructor">Size_limit_exceeded</span></span></code></td></tr><tr id="type-read_error.List_too_long" class="anchored"><td class="def variant constructor"><a href="#type-read_error.List_too_long" class="anchor"></a><code><span>| </span><span><span class="constructor">List_too_long</span></span></code></td></tr><tr id="type-read_error.Array_too_long" class="anchored"><td class="def variant constructor"><a href="#type-read_error.Array_too_long" class="anchor"></a><code><span>| </span><span><span class="constructor">Array_too_long</span></span></code></td></tr></table></div><div class="spec-doc"><p>All the errors that might be returned while reading a binary value</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Read_error" class="anchored"><a href="#exception-Read_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Read_error</span> <span class="keyword">of</span> <a href="#type-read_error">read_error</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_read_error" class="anchored"><a href="#val-pp_read_error" class="anchor"></a><code><span><span class="keyword">val</span> pp_read_error : <span><a href="../../../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><a href="#type-read_error">read_error</a> <span>&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-read_error_encoding" class="anchored"><a href="#val-read_error_encoding" class="anchor"></a><code><span><span class="keyword">val</span> read_error_encoding : <span><a href="#type-read_error">read_error</a> <a href="../../../../../../data-encoding/Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-write_error" class="anchored"><a href="#type-write_error" class="anchor"></a><code><span><span class="keyword">type</span> write_error</span><span> = <a href="../../../../../../data-encoding/Data_encoding/Binary/index.html#type-write_error">Data_encoding.Binary.write_error</a></span><span> = </span></code><table><tr id="type-write_error.Size_limit_exceeded" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Size_limit_exceeded" class="anchor"></a><code><span>| </span><span><span class="constructor">Size_limit_exceeded</span></span></code></td></tr><tr id="type-write_error.No_case_matched" class="anchored"><td class="def variant constructor"><a href="#type-write_error.No_case_matched" class="anchor"></a><code><span>| </span><span><span class="constructor">No_case_matched</span></span></code></td></tr><tr id="type-write_error.Invalid_int" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Invalid_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_int</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-write_error.min" class="anchored"><td class="def record field"><a href="#type-write_error.min" class="anchor"></a><code><span>min : int;</span></code></td></tr><tr id="type-write_error.v" class="anchored"><td class="def record field"><a href="#type-write_error.v" class="anchor"></a><code><span>v : int;</span></code></td></tr><tr id="type-write_error.max" class="anchored"><td class="def record field"><a href="#type-write_error.max" class="anchor"></a><code><span>max : int;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-write_error.Invalid_float" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Invalid_float" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_float</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-write_error.min" class="anchored"><td class="def record field"><a href="#type-write_error.min" class="anchor"></a><code><span>min : float;</span></code></td></tr><tr id="type-write_error.v" class="anchored"><td class="def record field"><a href="#type-write_error.v" class="anchor"></a><code><span>v : float;</span></code></td></tr><tr id="type-write_error.max" class="anchored"><td class="def record field"><a href="#type-write_error.max" class="anchor"></a><code><span>max : float;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-write_error.Invalid_bytes_length" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Invalid_bytes_length" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_bytes_length</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-write_error.expected" class="anchored"><td class="def record field"><a href="#type-write_error.expected" class="anchor"></a><code><span>expected : int;</span></code></td></tr><tr id="type-write_error.found" class="anchored"><td class="def record field"><a href="#type-write_error.found" class="anchor"></a><code><span>found : int;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-write_error.Invalid_string_length" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Invalid_string_length" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_string_length</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-write_error.expected" class="anchored"><td class="def record field"><a href="#type-write_error.expected" class="anchor"></a><code><span>expected : int;</span></code></td></tr><tr id="type-write_error.found" class="anchored"><td class="def record field"><a href="#type-write_error.found" class="anchor"></a><code><span>found : int;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-write_error.Invalid_natural" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Invalid_natural" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_natural</span></span></code></td></tr><tr id="type-write_error.List_too_long" class="anchored"><td class="def variant constructor"><a href="#type-write_error.List_too_long" class="anchor"></a><code><span>| </span><span><span class="constructor">List_too_long</span></span></code></td></tr><tr id="type-write_error.Array_too_long" class="anchored"><td class="def variant constructor"><a href="#type-write_error.Array_too_long" class="anchor"></a><code><span>| </span><span><span class="constructor">Array_too_long</span></span></code></td></tr></table></div><div class="spec-doc"><p>All the errors that might be returned while writing a binary value</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_write_error" class="anchored"><a href="#val-pp_write_error" class="anchor"></a><code><span><span class="keyword">val</span> pp_write_error : <span><a href="../../../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><a href="#type-write_error">write_error</a> <span>&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-write_error_encoding" class="anchored"><a href="#val-write_error_encoding" class="anchor"></a><code><span><span class="keyword">val</span> write_error_encoding : <span><a href="#type-write_error">write_error</a> <a href="../../../../../../data-encoding/Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Write_error" class="anchored"><a href="#exception-Write_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Write_error</span> <span class="keyword">of</span> <a href="#type-write_error">write_error</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-length" class="anchored"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Compute the expected length of the binary representation of a value</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fixed_length" class="anchored"><a href="#val-fixed_length" class="anchor"></a><code><span><span class="keyword">val</span> fixed_length : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p>Returns the size of the binary representation that the given encoding might produce, only when this size does not depends of the value itself.</p><p>E.g., <code>fixed_length (tup2 int64 (Fixed.string 2))</code> is <code>Some _</code></p><p>E.g., <code>fixed_length (result int64 (Fixed.string 2))</code> is <code>None</code></p><p>E.g., <code>fixed_length (list (tup2 int64 (Fixed.string 2)))</code> is <code>None</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-maximum_length" class="anchored"><a href="#val-maximum_length" class="anchor"></a><code><span><span class="keyword">val</span> maximum_length : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p>Returns the maximum size of the binary representation that the given encoding might produce, only when this maximum size does not depends of the value itself.</p><p>E.g., <code>maximum_length (tup2 int64 (Fixed.string 2))</code> is <code>Some _</code></p><p>E.g., <code>maximum_length (result int64 (Fixed.string 2))</code> is <code>Some _</code></p><p>E.g., <code>maximum_length (list (tup2 int64 (Fixed.string 2)))</code> is <code>None</code></p><p>Note that the function assumes that recursive encodings (build using <code>mu</code>) are used for recursive data types. As a result, <code>maximum_length</code> will return <code>None</code> if given a recursive encoding.</p><p>If there are static guarantees about the maximum size of the representation for values of a given type, you can wrap your encoding in <code>check_size</code>. This will cause <code>maximum_length</code> to return <code>Some _</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span><span>(int * <span class="type-var">'a</span>, <a href="#type-read_error">read_error</a>)</span> <a href="../../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>read enc buf ofs len</code> tries to reconstruct a value from the bytes in <code>buf</code> starting at offset <code>ofs</code> and reading at most <code>len</code> bytes. This function also returns the offset of the first unread bytes in the <code>buf</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_opt" class="anchored"><a href="#val-read_opt" class="anchor"></a><code><span><span class="keyword">val</span> read_opt : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span><span>(int * <span class="type-var">'a</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-read_exn" class="anchored"><a href="#val-read_exn" class="anchor"></a><code><span><span class="keyword">val</span> read_exn : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> int * <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-status" class="anchored"><a href="#type-status" class="anchor"></a><code><span><span class="keyword">type</span> <span>'ret status</span></span><span> = <span><span class="type-var">'ret</span> <a href="../../../../../../data-encoding/Data_encoding/Binary/index.html#type-status">Data_encoding.Binary.status</a></span></span><span> = </span></code><table><tr id="type-status.Await" class="anchored"><td class="def variant constructor"><a href="#type-status.Await" class="anchor"></a><code><span>| </span><span><span class="constructor">Await</span> <span class="keyword">of</span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span></span> <span><span class="type-var">'ret</span> <a href="#type-status">status</a></span></span></code></td><td class="doc"><p>Partially decoded value.</p></td></tr><tr id="type-status.Error" class="anchored"><td class="def variant constructor"><a href="#type-status.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span> <span class="keyword">of</span> <a href="#type-read_error">read_error</a></span></code></td><td class="doc"><p>Failure. The stream is garbled and it should be dropped.</p></td></tr></table></div><div class="spec-doc"><p>Return type for the function <code>read_stream</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_stream" class="anchored"><a href="#val-read_stream" class="anchor"></a><code><span><span class="keyword">val</span> read_stream : <span>?&#8288;init:<span class="xref-unresolved">Data_encoding__Binary_stream.t</span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-status">status</a></span></span></code></div><div class="spec-doc"><p>Streamed equivalent of <code>read</code>. This variant cannot be called on variable-size encodings.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-writer_state" class="anchored"><a href="#type-writer_state" class="anchor"></a><code><span><span class="keyword">type</span> writer_state</span><span> = <a href="../../../../../../data-encoding/Data_encoding/Binary/index.html#type-writer_state">Data_encoding.Binary.writer_state</a></span></code></div><div class="spec-doc"><p>The internal state that writers handle. It is presented explicitely as an abstract type so that you must use the constructor to obtain it. The constructor (<a href="#val-make_writer_state"><code>make_writer_state</code></a>) performs basic bound checks.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_writer_state" class="anchored"><a href="#val-make_writer_state" class="anchor"></a><code><span><span class="keyword">val</span> make_writer_state : <span>bytes <span>&#45;&gt;</span></span> <span>offset:int <span>&#45;&gt;</span></span> <span>allowed_bytes:int <span>&#45;&gt;</span></span> <span><a href="#type-writer_state">writer_state</a> option</span></span></code></div><div class="spec-doc"><p><code>make_writer_state buffer ~offset ~allowed_bytes</code> is <code>None</code> if <code>allowed_bytes &lt; 0</code>, <code>None</code> if <code>allowed_bytes &gt; length buffer - offset</code>, <code>Some _</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write" class="anchored"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><a href="#type-writer_state">writer_state</a> <span>&#45;&gt;</span></span> <span><span>(int, <a href="#type-write_error">write_error</a>)</span> <a href="../../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>write enc v state</code> where <code>Some state</code> is <code>make_writer_state buffer ~offset ~allowed_bytes</code> writes the binary <code>enc</code> representation of <code>v</code> onto <code>buffer</code> starting at <code>offset</code>. The function will fail (returning <code>Error _</code>) if the encoding would use more than <code>allowed_bytes</code>.</p><p>The function returns the offset of first unwritten bytes, or returns <code>Error _</code> in case of failure. In the latter case, some data might have been written on the buffer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write_opt" class="anchored"><a href="#val-write_opt" class="anchor"></a><code><span><span class="keyword">val</span> write_opt : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><a href="#type-writer_state">writer_state</a> <span>&#45;&gt;</span></span> <span>int option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-write_exn" class="anchored"><a href="#val-write_exn" class="anchor"></a><code><span><span class="keyword">val</span> write_exn : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><a href="#type-writer_state">writer_state</a> <span>&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_bytes" class="anchored"><a href="#val-of_bytes" class="anchor"></a><code><span><span class="keyword">val</span> of_bytes : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <a href="#type-read_error">read_error</a>)</span> <a href="../../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>of_bytes enc buf</code> is equivalent to <code>read enc buf 0 (length buf)</code>. The function fails if the buffer is not fully read.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_bytes_opt" class="anchored"><a href="#val-of_bytes_opt" class="anchor"></a><code><span><span class="keyword">val</span> of_bytes_opt : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_bytes_exn" class="anchored"><a href="#val-of_bytes_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_bytes_exn : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>of_bytes_exn enc buf</code> is equivalent to <code>of_bytes</code>, except</p><dl><dt>raises [Read_error]</dt><dd><p>instead of returning <code>None</code> in case of error.</p></dd></dl></div></div><div class="odoc-spec"><div class="spec value" id="val-of_string" class="anchored"><a href="#val-of_string" class="anchor"></a><code><span><span class="keyword">val</span> of_string : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <a href="#type-read_error">read_error</a>)</span> <a href="../../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>of_string enc buf</code> is like <code>of_bytes enc buf</code> but it reads bytes from a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_string_opt" class="anchored"><a href="#val-of_string_opt" class="anchor"></a><code><span><span class="keyword">val</span> of_string_opt : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_string_exn" class="anchored"><a href="#val-of_string_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_string_exn : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bytes" class="anchored"><a href="#val-to_bytes" class="anchor"></a><code><span><span class="keyword">val</span> to_bytes : <span>?&#8288;buffer_size:int <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span>(<a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a>, <a href="#type-write_error">write_error</a>)</span> <a href="../../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>to_bytes enc v</code> is the equivalent of <code>write env buf 0 len</code> where <code>buf</code> is a newly allocated buffer. The parameter <code>buffer_size</code> controls the initial size of <code>buf</code>.</p><dl><dt>raises [Invalid_argument]</dt><dd><p>if <code>buffer_size &lt; 0</code>.</p></dd></dl></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bytes_opt" class="anchored"><a href="#val-to_bytes_opt" class="anchor"></a><code><span><span class="keyword">val</span> to_bytes_opt : <span>?&#8288;buffer_size:int <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bytes_exn" class="anchored"><a href="#val-to_bytes_exn" class="anchor"></a><code><span><span class="keyword">val</span> to_bytes_exn : <span>?&#8288;buffer_size:int <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a></span></code></div><div class="spec-doc"><p><code>to_bytes_exn enc v</code> is equivalent to <code>to_bytes enc v</code>, except</p><dl><dt>raises [Write_error]</dt><dd><p>instead of returning <code>None</code> in case of error.</p></dd></dl></div></div><div class="odoc-spec"><div class="spec value" id="val-to_string" class="anchored"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span>?&#8288;buffer_size:int <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span>(string, <a href="#type-write_error">write_error</a>)</span> <a href="../../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>to_string enc v</code> is like <code>to_bytes</code> but it returns a string.</p><p>Note: <code>to_string enc v</code> is always equal to <code>Bytes.to_string (to_bytes enc v)</code> but more efficient.</p><dl><dt>raises [Invalid_argument]</dt><dd><p>if <code>buffer_size &lt; 0</code>.</p></dd></dl></div></div><div class="odoc-spec"><div class="spec value" id="val-to_string_opt" class="anchored"><a href="#val-to_string_opt" class="anchor"></a><code><span><span class="keyword">val</span> to_string_opt : <span>?&#8288;buffer_size:int <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span>string option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_string_exn" class="anchored"><a href="#val-to_string_exn" class="anchor"></a><code><span><span class="keyword">val</span> to_string_exn : <span>?&#8288;buffer_size:int <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><dl><dt>raises [Write_error]</dt><dd><p>instead of returning <code>None</code> in case of error.</p></dd></dl></div></div><div class="odoc-spec"><div class="spec value" id="val-describe" class="anchored"><a href="#val-describe" class="anchor"></a><code><span><span class="keyword">val</span> describe : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <a href="../../../../../../data-encoding/Data_encoding/Binary_schema/index.html#type-t">Data_encoding.Binary_schema.t</a></span></code></div></div></details></div></div></div><div class="odoc-spec"><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span>bytes <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span><span>(int * <span class="type-var">'a</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-write" class="anchored"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span>bytes <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span>int <span>&#45;&gt;</span></span> <span>int option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_bytes" class="anchored"><a href="#val-of_bytes" class="anchor"></a><code><span><span class="keyword">val</span> of_bytes : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bytes" class="anchored"><a href="#val-to_bytes" class="anchor"></a><code><span><span class="keyword">val</span> to_bytes : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bytes_exn" class="anchored"><a href="#val-to_bytes_exn" class="anchor"></a><code><span><span class="keyword">val</span> to_bytes_exn : <span><span><span class="type-var">'a</span> <a href="../../../../../../data-encoding/Data_encoding/Encoding/index.html#type-t">Data_encoding.Encoding.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <a href="../../../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a></span></code></div></div></div></body></html>