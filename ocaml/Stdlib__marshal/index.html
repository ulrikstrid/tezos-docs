<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Stdlib__marshal (ocaml.Stdlib__marshal)</title><link rel="stylesheet" href="../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">ocaml</a> &#x00BB; Stdlib__marshal</nav><header class="odoc-preamble"><h1>Module <code><span>Stdlib__marshal</span></code></h1><p>Marshaling of data structures.</p><p>This module provides functions to encode arbitrary data structures as sequences of bytes, which can then be written on a file or sent over a pipe or network connection. The bytes can then be read back later, possibly in another process, and decoded back into a data structure. The format for the byte sequences is compatible across all machines for a given version of OCaml.</p><p>Warning: marshaling is currently not type-safe. The type of marshaled data is not transmitted along the value of the data, making it impossible to check that the data read back possesses the type expected by the context. In particular, the result type of the <code>Marshal.from_*</code> functions is given as <code>'a</code>, but this is misleading: the returned OCaml value does not possess type <code>'a</code> for all <code>'a</code>; it has one, unique type which cannot be determined at compile-time. The programmer should explicitly give the expected type of the returned value, using the following syntax:</p><ul><li><code>(Marshal.from_channel chan : type)</code>. Anything can happen at run-time if the object in the file does not belong to the given type.</li></ul><p>Values of extensible variant types, for example exceptions (of extensible type <code>exn</code>), returned by the unmarshaller should not be pattern-matched over through <code>match ... with</code> or <code>try ... with</code>, because unmarshalling does not preserve the information required for matching their constructors. Structural equalities with other extensible variant values does not work either. Most other uses such as Printexc.to_string, will still work as expected.</p><p>The representation of marshaled values is not human-readable, and uses bytes that are not printable characters. Therefore, input and output channels used in conjunction with <code>Marshal.to_channel</code> and <code>Marshal.from_channel</code> must be opened in binary mode, using e.g. <code>open_out_bin</code> or <code>open_in_bin</code>; channels opened in text mode will cause unmarshaling errors on platforms where text channels behave differently than binary channels, e.g. Windows.</p></header><div class="odoc-content"></div></body></html>