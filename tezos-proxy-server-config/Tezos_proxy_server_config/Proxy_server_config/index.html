<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Proxy_server_config (tezos-proxy-server-config.Tezos_proxy_server_config.Proxy_server_config)</title><link rel="stylesheet" href="../../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tezos-proxy-server-config</a> &#x00BB; <a href="../index.html">Tezos_proxy_server_config</a> &#x00BB; Proxy_server_config</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_proxy_server_config.Proxy_server_config</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-t.endpoint" class="anchored"><td class="def record field"><a href="#type-t.endpoint" class="anchor"></a><code><span>endpoint : <span><a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option</span>;</span></code></td><td class="doc"><p>The node to delegate RPCs to. Name was chosen to be the same as in <code>tezos-client</code></p></td></tr><tr id="type-t.rpc_addr" class="anchored"><td class="def record field"><a href="#type-t.rpc_addr" class="anchor"></a><code><span>rpc_addr : <span><a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option</span>;</span></code></td><td class="doc"><p>The address that the proxy server serves. Name was chosen to be the same as in <code>tezos-node run</code></p></td></tr><tr id="type-t.rpc_tls" class="anchored"><td class="def record field"><a href="#type-t.rpc_tls" class="anchor"></a><code><span>rpc_tls : <span>string option</span>;</span></code></td><td class="doc"><p>A string of the form <code>&quot;crt,key&quot;</code> where <code>crt</code> is the path to the TLS certificate to use and <code>key</code> is the path to the key to use. Name was chosen to be the same as in <code>tezos-node run</code></p></td></tr><tr id="type-t.sym_block_caching_time" class="anchored"><td class="def record field"><a href="#type-t.sym_block_caching_time" class="anchor"></a><code><span>sym_block_caching_time : <span>int option</span>;</span></code></td><td class="doc"><p>The time during which data for a symbolic block identifier (like <code>head</code>, <code>head~1</code>) is kept. Smaller values increase <code>endpoint</code>'s load but yield more up-to-date to clients. Higher values decrease <code>endpoint</code>'s load but make clients observe slightly deprecated values. If omitted, defaulted to <code>time_between_blocks</code>.</p><p>If you are not sure what to do, do not specify it; i.e. do not pass <code>--sym-block-caching-time</code>. If your node's load is too high, pass a bigger value than <code>time_between_blocks</code> (if your clients are fine seeing slightly deprecated values)</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>This type corresponds to the content of the <code>CONFIG</code> file, as well as the aggregations of the corresponding command line arguments. Once it is built and, it is transformed into a value of type <code>runtime</code> which represents what the APIs actually needs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty printer for <code>t</code></p></div></div><div class="odoc-spec"><div class="spec type" id="type-runtime" class="anchored"><a href="#type-runtime" class="anchor"></a><code><span><span class="keyword">type</span> runtime</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-runtime.endpoint" class="anchored"><td class="def record field"><a href="#type-runtime.endpoint" class="anchor"></a><code><span>endpoint : <a href="../../../uri/Uri/index.html#type-t">Uri.t</a>;</span></code></td><td class="doc"><p>The node to delegate RPCs to.</p></td></tr><tr id="type-runtime.rpc_server_address" class="anchored"><td class="def record field"><a href="#type-runtime.rpc_server_address" class="anchor"></a><code><span>rpc_server_address : <a href="../../../tezos-base/Tezos_base/P2p_addr/index.html#type-t">Tezos_base.P2p_addr.t</a>;</span></code></td><td class="doc"><p>The address of the server</p></td></tr><tr id="type-runtime.rpc_server_port" class="anchored"><td class="def record field"><a href="#type-runtime.rpc_server_port" class="anchor"></a><code><span>rpc_server_port : int;</span></code></td><td class="doc"><p>The port of the server</p></td></tr><tr id="type-runtime.rpc_server_tls" class="anchored"><td class="def record field"><a href="#type-runtime.rpc_server_tls" class="anchor"></a><code><span>rpc_server_tls : <span><span>(string * string)</span> option</span>;</span></code></td><td class="doc"><p>The paths to the certificate and key to use for TLS</p></td></tr><tr id="type-runtime.sym_block_caching_time" class="anchored"><td class="def record field"><a href="#type-runtime.sym_block_caching_time" class="anchor"></a><code><span>sym_block_caching_time : <span>int option</span>;</span></code></td><td class="doc"><p>The duration during which data of symbolic blocks is kept</p></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>A value of type <code>t</code> after having been appropriately validated and prepared for being passed to the various APIs that need them (hence some types are slightly different than in <code>t</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>endpoint:<span><a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option</span> <span>&#45;&gt;</span></span> <span>rpc_addr:<span><a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option</span> <span>&#45;&gt;</span></span> <span>rpc_tls:<span>string option</span> <span>&#45;&gt;</span></span>
<span>sym_block_caching_time:<span>int option</span> <span>&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make endpoint rpc_addr rpc_tls sym_block_caching_time</code> creates an instance of <code>t</code> from the flags that are available on the command line. See <code>t</code> for the documentation of parameters.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-example_config" class="anchored"><a href="#val-example_config" class="anchor"></a><code><span><span class="keyword">val</span> example_config : string</span></code></div><div class="spec-doc"><p>Valid config file: if passed to <code>destruct_config</code>, <code>Valid</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-destructed" class="anchored"><a href="#type-destructed" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a destructed</span></span><span> = </span></code><table><tr id="type-destructed.Valid" class="anchored"><td class="def variant constructor"><a href="#type-destructed.Valid" class="anchor"></a><code><span>| </span><span><span class="constructor">Valid</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td><td class="doc"><p>File could be parsed and validated</p></td></tr><tr id="type-destructed.Invalid" class="anchored"><td class="def variant constructor"><a href="#type-destructed.Invalid" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid</span> <span class="keyword">of</span> string</span></code></td><td class="doc"><p>File could be parsed but not validated. Message is detailed.</p></td></tr><tr id="type-destructed.CannotDeserialize" class="anchored"><td class="def variant constructor"><a href="#type-destructed.CannotDeserialize" class="anchor"></a><code><span>| </span><span><span class="constructor">CannotDeserialize</span></span></code></td><td class="doc"><p>Deserializing the JSON failed.</p></td></tr></table></div><div class="spec-doc"><p>Encoding of what may happen when deserializing a JSON value whose OCaml type is <code>'a</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-destruct_config" class="anchored"><a href="#val-destruct_config" class="anchor"></a><code><span><span class="keyword">val</span> destruct_config : <span><a href="../../../data-encoding/Data_encoding/index.html#type-json">Data_encoding.json</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <a href="#type-destructed">destructed</a></span></span></code></div><div class="spec-doc"><p><code>destruct_config json</code> returns a <code>t</code> from raw <code>json</code>. Returns <code>Ok</code> in case of success, or <code>Error msg</code> if validation fails.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-union_right_bias" class="anchored"><a href="#val-union_right_bias" class="anchor"></a><code><span><span class="keyword">val</span> union_right_bias : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>merge_right_bias t1 t2</code> returns the union of data of <code>t1</code> and <code>t2</code> (taking the <code>Some</code> case on fields of type <code>option</code>). If data is present on both side, take data from <code>t2</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_runtime" class="anchored"><a href="#val-to_runtime" class="anchor"></a><code><span><span class="keyword">val</span> to_runtime : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><span>(<a href="#type-runtime">runtime</a>, string)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></span></code></div><div class="spec-doc"><p><code>to_runtime t</code> returns a <code>runtime</code> from a <code>t</code>. Returns <code>Ok</code> in case of success, or <code>Error msg</code> if validation fails.</p></div></div></div></body></html>