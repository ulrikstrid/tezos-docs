<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hard_fork (flextesa.Flextesa.Hard_fork)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">flextesa</a> &#x00BB; <a href="../index.html">Flextesa</a> &#x00BB; Hard_fork</nav><header class="odoc-preamble"><h1>Module <code><span>Flextesa.Hard_fork</span></code></h1></header><div class="odoc-content"><p>User-activated Upgrades, a.k.a. Hard Forks</p><p>This module provides helpers to make “hard-fork” protocol changes happen in sandboxes.</p><p>See <code>&quot;src/lib/interactive_mini_network.ml&quot;</code> for an example of usage.</p><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-t.level" class="anchored"><td class="def record field"><a href="#type-t.level" class="anchor"></a><code><span>level : <a href="../Internal_pervasives/index.html#type-int">Internal_pervasives.int</a>;</span></code></td></tr><tr id="type-t.protocol_hash" class="anchored"><td class="def record field"><a href="#type-t.protocol_hash" class="anchor"></a><code><span>protocol_hash : <a href="../Internal_pervasives/index.html#type-string">Internal_pervasives.string</a>;</span></code></td></tr><tr id="type-t.name" class="anchored"><td class="def record field"><a href="#type-t.name" class="anchor"></a><code><span>name : <a href="../Internal_pervasives/index.html#type-string">Internal_pervasives.string</a>;</span></code></td></tr><tr id="type-t.baker" class="anchored"><td class="def record field"><a href="#type-t.baker" class="anchor"></a><code><span>baker : <a href="../Tezos_executable/index.html#type-t">Tezos_executable.t</a>;</span></code></td></tr><tr id="type-t.endorser" class="anchored"><td class="def record field"><a href="#type-t.endorser" class="anchor"></a><code><span>endorser : <a href="../Tezos_executable/index.html#type-t">Tezos_executable.t</a>;</span></code></td></tr><tr id="type-t.accuser" class="anchored"><td class="def record field"><a href="#type-t.accuser" class="anchor"></a><code><span>accuser : <a href="../Tezos_executable/index.html#type-t">Tezos_executable.t</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cmdliner_term" class="anchored"><a href="#val-cmdliner_term" class="anchor"></a><code><span><span class="keyword">val</span> cmdliner_term : <span><span>&lt; manpager : <a href="../Internal_pervasives/Manpage_builder/State/index.html#type-t">Internal_pervasives.Manpage_builder.State.t</a>; .. &gt;</span> <span>&#45;&gt;</span></span> <span>docs:<a href="../Internal_pervasives/index.html#type-string">Internal_pervasives.string</a> <span>&#45;&gt;</span></span> <span>?&#8288;prefix:<a href="../Internal_pervasives/index.html#type-string">Internal_pervasives.string</a> <span>&#45;&gt;</span></span> <span><a href="../Internal_pervasives/index.html#type-unit">Internal_pervasives.unit</a> <span>&#45;&gt;</span></span> <span><span><a href="#type-t">t</a> <a href="../Internal_pervasives/index.html#type-option">Internal_pervasives.option</a></span> <a href="../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span></span></code></div><div class="spec-doc"><p>For a given <code>prefix</code> (default <code>&quot;hard-fork&quot;</code>), provide a family of <code>&quot;--&lt;prefix&gt;*&quot;</code> command-line options allowing to configure a user-activated-upgrade.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-executables" class="anchored"><a href="#val-executables" class="anchor"></a><code><span><span class="keyword">val</span> executables : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span><a href="../Tezos_executable/index.html#type-t">Tezos_executable.t</a> <a href="../Internal_pervasives/index.html#type-list">Internal_pervasives.list</a></span></span></code></div><div class="spec-doc"><p>Get all the protocol-specific executable definitions (the “daemons”) involved in this hard-fork.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-node_network_config" class="anchored"><a href="#val-node_network_config" class="anchor"></a><code><span><span class="keyword">val</span> node_network_config : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <a href="../Internal_pervasives/index.html#type-string">Internal_pervasives.string</a> * <span>[&gt; <a href="../../../ezjsonm/Ezjsonm/index.html#type-t">Ezjsonm.t</a> ]</span></span></code></div><div class="spec-doc"><p>Generate the JSON field for the <code>&quot;{ network : { ... } }&quot;</code> part of a node's configuration file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-keyed_daemons" class="anchored"><a href="#val-keyed_daemons" class="anchor"></a><code><span><span class="keyword">val</span> keyed_daemons : <span><a href="#type-t">t</a> <span>&#45;&gt;</span></span> <span>client:<a href="../Tezos_client/index.html#type-t">Tezos_client.t</a> <span>&#45;&gt;</span></span> <span>key:<a href="../Internal_pervasives/index.html#type-string">Internal_pervasives.string</a> <span>&#45;&gt;</span></span> <span>node:<a href="../Tezos_node/index.html#type-t">Tezos_node.t</a> <span>&#45;&gt;</span></span> <span><a href="../Tezos_daemon/index.html#type-t">Tezos_daemon.t</a> <a href="../Internal_pervasives/index.html#type-list">Internal_pervasives.list</a></span></span></code></div><div class="spec-doc"><p>Prepare the baker and endorse daemons to secure the hard-fork.</p></div></div></div></body></html>