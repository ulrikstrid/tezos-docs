<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezos_store__Snapshots (tezos-store.Tezos_store__Snapshots)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">tezos-store</a> &#x00BB; Tezos_store__Snapshots</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_store__Snapshots</span></code></h1><p>Snapshots for the store</p><p>Snapshots are canonical representations of the store and its associated context. Its main purposes it to save and load a current state with the minimal necessary amount of information. This snapshot may also be shared by third parties to facilitate the bootstrap process.</p><p>A snapshot of a block <code>B</code> is composed of:</p><ul><li>The metadata of the snapshot;</li><li>A single context containing every key that the block <code>B-1</code> needs (see below);</li><li>The set of blocks and their operations from the genesis block up to <code>B</code> -- it might contain less blocks if the snapshot is created from a store using a <code>Rolling</code> history mode of if it is created as a <code>Rolling</code> snapshot. Block's metadata are not exported ;</li><li>The set of necessary Tezos protocols.</li></ul><p>Exporting a snapshot will generate such a file (or a directory, if the snapshot is not compressed). Importing a snapshot will initialize a fresh store with the data contained in the snapshot. As snapshots may be shared between users, checks are made to ensure that no malicious data is loaded. For instance, we export the context of block <code>B-1</code> to make sure that the application of the block <code>B</code>, given its predecessor's context, is valid.</p><p>Depending on the history mode, a snapshot might contain less blocks. In full, all blocks are present and importing such a snapshot will populate the <code>Cemented_store</code> with every cycle up to the snapshot's target block. Meanwhile, in <code>Rolling</code>, only a few previous blocks will be exported (<code>max_op_ttl</code> from the target block), only populating a <code>Floating_block_store</code>. Thus, the snapshot size greatly differs depending on the history mode used.</p><p>Snapshots may be created concurrently with a running node. It might impact the node for a few seconds to retrieve the necessary consistent information to producethe snapshot.</p></header><div class="odoc-content"></div></body></html>