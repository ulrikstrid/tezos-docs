<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Test_services (tezos-test-services.Tezos_test_services.Test_services)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-test-services</a> &#x00BB; <a href="../index.html">Tezos_test_services</a> &#x00BB; Test_services</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_test_services.Test_services</span></code></h1><p><code>test_services</code> collects Alcotest testable definitions for base OCaml types and Tezos specific types.</p></header><div class="odoc-content"><div class="odoc-include"><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../../alcotest/Alcotest/index.html">Alcotest</a> <span class="keyword">end</span></span></code></span></summary><div class="odoc-include"><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span><span class="keyword">include</span> <a href="../../../alcotest/Alcotest_engine/Cli/module-type-S/index.html">Alcotest_engine.Cli.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../alcotest/Alcotest_engine/Cli/module-type-S/index.html#type-return">return</a> = unit</span></span></code></span></summary><div class="odoc-include"><div class="spec include"><div class="doc"><div class="odoc-spec"><div class="spec exception" id="exception-Test_error" class="anchored"><a href="#exception-Test_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Test_error</span></span></code></div><div class="spec-doc"><p>The exception return by <a href="#val-run"><code>run</code></a> in case of errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-test_case" class="anchored"><a href="#val-test_case" class="anchor"></a><code><span><span class="keyword">val</span> test_case : <span>string <span>&#45;&gt;</span></span> <span><span>[ `Quick <span>| `Slow</span> ]</span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span> <span>&#45;&gt;</span></span> string * <span>[ `Quick <span>| `Slow</span> ]</span> * <span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span></span></code></div><div class="spec-doc"><p><code>test_case n s f</code> is the test case <code>n</code> running at speed <code>s</code> using the function <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list_tests" class="anchored"><a href="#val-list_tests" class="anchor"></a><code><span><span class="keyword">val</span> list_tests : <span><span><span>(string * <span><span>(string * <span>[ `Quick <span>| `Slow</span> ]</span> * <span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span>)</span> list</span>)</span> list</span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print all of the test cases in a human-readable form</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span>?&#8288;and_exit:bool <span>&#45;&gt;</span></span> <span>?&#8288;verbose:bool <span>&#45;&gt;</span></span> <span>?&#8288;compact:bool <span>&#45;&gt;</span></span>
<span>?&#8288;tail_errors:<span>[ `Unlimited <span><span>| `Limit</span> of int</span> ]</span> <span>&#45;&gt;</span></span> <span>?&#8288;quick_only:bool <span>&#45;&gt;</span></span>
<span>?&#8288;show_errors:bool <span>&#45;&gt;</span></span> <span>?&#8288;json:bool <span>&#45;&gt;</span></span> <span>?&#8288;filter:<span>(<span><a href="../../../re/Re/index.html#type-re">Re.re</a> option</span> * <span><span>int list</span> option</span>)</span> <span>&#45;&gt;</span></span>
<span>?&#8288;log_dir:string <span>&#45;&gt;</span></span> <span>?&#8288;bail:bool <span>&#45;&gt;</span></span>
<span>string <span>&#45;&gt;</span></span> <span><span><span>(string * <span><span>(string * <span>[ `Quick <span>| `Slow</span> ]</span> * <span>(<span>unit <span>&#45;&gt;</span></span> unit)</span>)</span> list</span>)</span> list</span> <span>&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-run_with_args" class="anchored"><a href="#val-run_with_args" class="anchor"></a><code><span><span class="keyword">val</span> run_with_args : <span>?&#8288;and_exit:bool <span>&#45;&gt;</span></span> <span>?&#8288;verbose:bool <span>&#45;&gt;</span></span> <span>?&#8288;compact:bool <span>&#45;&gt;</span></span>
<span>?&#8288;tail_errors:<span>[ `Unlimited <span><span>| `Limit</span> of int</span> ]</span> <span>&#45;&gt;</span></span> <span>?&#8288;quick_only:bool <span>&#45;&gt;</span></span>
<span>?&#8288;show_errors:bool <span>&#45;&gt;</span></span> <span>?&#8288;json:bool <span>&#45;&gt;</span></span> <span>?&#8288;filter:<span>(<span><a href="../../../re/Re/index.html#type-re">Re.re</a> option</span> * <span><span>int list</span> option</span>)</span> <span>&#45;&gt;</span></span>
<span>?&#8288;log_dir:string <span>&#45;&gt;</span></span> <span>?&#8288;bail:bool <span>&#45;&gt;</span></span>
<span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span><span>(string * <span><span>(string * <span>[ `Quick <span>| `Slow</span> ]</span> * <span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span>)</span> list</span>)</span> list</span> <span>&#45;&gt;</span></span> unit</span></code></div></div></div></div></div><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span>(<span>?&#8288;argv:<span>string array</span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span><span>unit <span class="xref-unresolved">{test}9</span></span> list</span> <span>&#45;&gt;</span></span> <span class="xref-unresolved">{return}6</span>)</span> <span class="xref-unresolved">{with_options}10</span></span></span></code></div><div class="spec-doc"><p><code>run n t</code> runs the test suite <code>t</code>. <code>n</code> is the name of the tested library.</p><p>The optional argument <code>and_exit</code> controls what happens when the function ends. By default, <code>and_exit</code> is set, which makes the function exit with <code>0</code> if everything is fine or <code>1</code> if there is an issue. If <code>and_exit</code> is <code>false</code>, then the function raises <code>Test_error</code> on error.</p><p>The optional argument <code>argv</code> specifies command line arguments sent to alcotest like <code>&quot;--json&quot;</code>, <code>&quot;--verbose&quot;</code>, etc. Note that this array will be treated like a regular <code>Sys.argv</code>, so the array must have at least one element, and the first element will be treated as if it was the command name and thus ignored for the purposes of option processing. So <code>~argv:[||]</code> is an error, <code>~argv:[| &quot;--verbose&quot; |]</code> will have no effect, and <code>~argv:[| &quot;ignored&quot;; &quot;--verbose&quot; |]</code> will successfully pass the verbose option.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run_with_args" class="anchored"><a href="#val-run_with_args" class="anchor"></a><code><span><span class="keyword">val</span> run_with_args : <span><span>(<span>?&#8288;argv:<span>string array</span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span> <span>&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <span class="xref-unresolved">{test}9</span></span> list</span> <span>&#45;&gt;</span></span> <span class="xref-unresolved">{return}6</span>)</span> <span class="xref-unresolved">{with_options}10</span></span></span></code></div><div class="spec-doc"><p><code>run_with_args n a t</code> Similar to <code>run a t</code> but take an extra argument <code>a</code>. Every test function will receive as argument the evaluation of the <code>Cmdliner</code> term <code>a</code>: this is useful to configure the test behaviors using the CLI.</p></div></div></details></div></div></div><div class="odoc-include"><div class="spec include"><div class="doc"><div class="odoc-spec"><div class="spec value" id="val-testable" class="anchored"><a href="#val-testable" class="anchor"></a><code><span><span class="keyword">val</span> testable : <span><span><span class="type-var">'a</span> <a href="../../../fmt/Fmt/index.html#type-t">Fmt.t</a></span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> bool)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>testable pp eq</code> is a new <a href="#val-testable"><code>testable</code></a> with the pretty-printer <code>pp</code> and equality <code>eq</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../../fmt/Fmt/index.html#type-t">Fmt.t</a></span></span></code></div><div class="spec-doc"><p><code>pp t</code> is <code>t</code>'s pretty-printer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal t</code> is <code>t</code>'s equality.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bool" class="anchored"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = bool)</span></span></code></div><div class="spec-doc"><p><code>bool</code> tests booleans.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int" class="anchored"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = int)</span></span></code></div><div class="spec-doc"><p><code>int</code> tests integers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int32" class="anchored"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = int32)</span></span></code></div><div class="spec-doc"><p><code>int32</code> tests 32-bit integers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int64" class="anchored"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = int64)</span></span></code></div><div class="spec-doc"><p><code>int64</code> tests 64-bit integers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-float" class="anchored"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span>float <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = float)</span></span></code></div><div class="spec-doc"><p><code>float</code> tests floats with specified absolute error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-char" class="anchored"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = char)</span></span></code></div><div class="spec-doc"><p><code>char</code> tests characters.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string" class="anchored"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = string)</span></span></code></div><div class="spec-doc"><p><code>string</code> tests OCaml strings.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bytes" class="anchored"><a href="#val-bytes" class="anchor"></a><code><span><span class="keyword">val</span> bytes : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = bytes)</span></span></code></div><div class="spec-doc"><p><code>bytes</code> tests OCaml bytes.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unit" class="anchored"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = unit)</span></span></code></div><div class="spec-doc"><p><code>unit</code> tests unit values (useful for functions with side-effects).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list" class="anchored"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span><span class="type-var">'a</span> list</span>)</span></span></code></div><div class="spec-doc"><p><code>list t</code> tests lists of <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-slist" class="anchored"><a href="#val-slist" class="anchor"></a><code><span><span class="keyword">val</span> slist : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> int)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span><span class="type-var">'a</span> list</span>)</span></span></code></div><div class="spec-doc"><p><code>slist t comp</code> tests sorted lists of <code>t</code>s. The list are sorted using <code>comp</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-array" class="anchored"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span><span class="type-var">'a</span> array</span>)</span></span></code></div><div class="spec-doc"><p><code>array t</code> tests arrays of <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-option" class="anchored"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span><span class="type-var">'a</span> option</span>)</span></span></code></div><div class="spec-doc"><p><code>option t</code> tests optional <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-result" class="anchored"><a href="#val-result" class="anchor"></a><code><span><span class="keyword">val</span> result : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'e</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span><span>(<span class="type-var">'a</span>,Â <span class="type-var">'e</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span>)</span></span></code></div><div class="spec-doc"><p><code>result t e</code> tests <code>t</code>s on success and <code>e</code>s on failure.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pair" class="anchored"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span> * <span class="type-var">'b</span>)</span></span></code></div><div class="spec-doc"><p><code>pair a b</code> tests pairs of <code>a</code>s and <code>b</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-triple" class="anchored"><a href="#val-triple" class="anchor"></a><code><span><span class="keyword">val</span> triple : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span></span> <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span></span></code></div><div class="spec-doc"><p><code>triple a b c</code> tests triples of <code>a</code>s, <code>b</code>s and <code>c</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_pp" class="anchored"><a href="#val-of_pp" class="anchor"></a><code><span><span class="keyword">val</span> of_pp : <span><span><span class="type-var">'a</span> <a href="../../../fmt/Fmt/index.html#type-t">Fmt.t</a></span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>of_pp pp</code> tests values which can be printed using <code>pp</code> and compared using <code>Pervasives</code>.compare</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pass" class="anchored"><a href="#val-pass" class="anchor"></a><code><span><span class="keyword">val</span> pass : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>pass</code> tests values of any type and always succeeds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-reject" class="anchored"><a href="#val-reject" class="anchor"></a><code><span><span class="keyword">val</span> reject : <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>reject</code> tests values of any type and always fails.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-neg" class="anchored"><a href="#val-neg" class="anchor"></a><code><span><span class="keyword">val</span> neg : <span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>neg t</code> is <code>t</code>'s negation: it is <code>true</code> when <code>t</code> is <code>false</code> and it is <code>false</code> when <code>t</code> is <code>true</code>.</p></div></div><h2 id="assertion-functions"><a href="#assertion-functions" class="anchor"></a>Assertion functions</h2><p>Functions for asserting various properties within unit-tests. A failing assertion will cause the testcase to fail immediately.</p><div class="odoc-spec"><div class="spec value" id="val-check" class="anchored"><a href="#val-check" class="anchor"></a><code><span><span class="keyword">val</span> check : <span>?&#8288;here:<a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a> <span>&#45;&gt;</span></span> <span>?&#8288;pos:<span>(string * int * int * int)</span> <span>&#45;&gt;</span></span>
<span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that two values are equal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check'" class="anchored"><a href="#val-check'" class="anchor"></a><code><span><span class="keyword">val</span> check' : <span>?&#8288;here:<a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a> <span>&#45;&gt;</span></span> <span>?&#8288;pos:<span>(string * int * int * int)</span> <span>&#45;&gt;</span></span>
<span><span>(<span class="keyword">module</span> <span class="xref-unresolved">{TESTABLE}71</span> <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span>msg:string <span>&#45;&gt;</span></span> <span>expected:<span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span>actual:<span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that two values are equal (labeled variant of <a href="#val-check"><code>check</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fail" class="anchored"><a href="#val-fail" class="anchor"></a><code><span><span class="keyword">val</span> fail : <span>?&#8288;here:<a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a> <span>&#45;&gt;</span></span> <span>?&#8288;pos:<span>(string * int * int * int)</span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Simply fail.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-failf" class="anchored"><a href="#val-failf" class="anchor"></a><code><span><span class="keyword">val</span> failf : <span>?&#8288;here:<a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a> <span>&#45;&gt;</span></span> <span>?&#8288;pos:<span>(string * int * int * int)</span> <span>&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,Â <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>,Â unit,Â <span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a></span> <span>&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Simply fail with a formatted message.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_raises" class="anchored"><a href="#val-check_raises" class="anchor"></a><code><span><span class="keyword">val</span> check_raises : <span>?&#8288;here:<a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a> <span>&#45;&gt;</span></span> <span>?&#8288;pos:<span>(string * int * int * int)</span> <span>&#45;&gt;</span></span>
<span>string <span>&#45;&gt;</span></span> <span>exn <span>&#45;&gt;</span></span> <span><span>(<span>unit <span>&#45;&gt;</span></span> unit)</span> <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that an exception is raised.</p></div></div></div></div></div><h2 id="unix-specific-engine-constructors"><a href="#unix-specific-engine-constructors" class="anchor"></a>Unix-specific engine constructors</h2><p>The <code>Alcotest_engine</code> package provides the most general form of the Alcotest API, parameterised over the thread implementation and the platform. This package provides the <code>Unix</code> platform implementation.</p></details></div></div></div><div class="odoc-include"><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../Test_services_base/index.html">Test_services_base</a> <span class="keyword">end</span></span></code></span></summary><div class="odoc-include"><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../../alcotest/Alcotest/index.html">Alcotest</a> <span class="keyword">end</span></span></code></span></summary><div class="odoc-include"><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span><span class="keyword">include</span> <a href="../../../alcotest/Alcotest_engine/Cli/module-type-S/index.html">Alcotest_engine.Cli.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../alcotest/Alcotest_engine/Cli/module-type-S/index.html#type-return">return</a> = unit</span></span></code></span></summary><div class="odoc-include"><div class="spec include"><div class="doc"><div class="odoc-spec"><div class="spec type" id="type-return" class="anchored"><a href="#type-return" class="anchor"></a><code><span><span class="keyword">type</span> return</span><span> = unit</span></code></div><div class="spec-doc"><p>The return type of each test case run by Alcotest. For the standard <a href="../../../alcotest/Alcotest/index.html"><code>Alcotest</code></a> module, <code>return = unit</code>. The concurrent backends <code>Alcotest_lwt</code> and <code>Alcotest_async</code> set <code>return = unit Lwt.t</code> and <code>return = Async_kernel.Deferred.t</code> respectively.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-speed_level" class="anchored"><a href="#type-speed_level" class="anchor"></a><code><span><span class="keyword">type</span> speed_level</span><span> = </span><span>[ </span></code><table><tr id="type-speed_level.Quick" class="anchored"><td class="def constructor"><a href="#type-speed_level.Quick" class="anchor"></a><code><span>| </span></code><code><span>`Quick</span></code></td></tr><tr id="type-speed_level.Slow" class="anchored"><td class="def constructor"><a href="#type-speed_level.Slow" class="anchor"></a><code><span>| </span></code><code><span>`Slow</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Speed level of a test. Tests marked as <code>`Quick</code> are always run. Tests marked as <code>`Slow</code> are skipped when the `-q` flag is passed.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-test_case" class="anchored"><a href="#type-test_case" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a test_case</span></span><span> = string * <a href="#type-speed_level">speed_level</a> * <span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a>)</span></span></code></div><div class="spec-doc"><p>A test case is a UTF-8 encoded documentation string, a speed level and a function to execute. Typically, the testing function calls the helper functions provided below (such as <code>check</code> and <code>fail</code>).</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Test_error" class="anchored"><a href="#exception-Test_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Test_error</span></span></code></div><div class="spec-doc"><p>The exception return by <a href="#val-run"><code>run</code></a> in case of errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-test_case" class="anchored"><a href="#val-test_case" class="anchor"></a><code><span><span class="keyword">val</span> test_case : <span>string <span>&#45;&gt;</span></span> <span><a href="#type-speed_level">speed_level</a> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-test_case">test_case</a></span></span></code></div><div class="spec-doc"><p><code>test_case n s f</code> is the test case <code>n</code> running at speed <code>s</code> using the function <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-test" class="anchored"><a href="#type-test" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a test</span></span><span> = string * <span><span><span class="type-var">'a</span> <a href="#type-test_case">test_case</a></span> list</span></span></code></div><div class="spec-doc"><p>A test is a UTF-8 encoded name and a list of test cases. The name can be used for filtering which tests to run on the CLI.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list_tests" class="anchored"><a href="#val-list_tests" class="anchor"></a><code><span><span class="keyword">val</span> list_tests : <span><span><span><span class="type-var">'a</span> <a href="#type-test">test</a></span> list</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a></span></code></div><div class="spec-doc"><p>Print all of the test cases in a human-readable form</p></div></div><div class="odoc-spec"><div class="spec type" id="type-with_options" class="anchored"><a href="#type-with_options" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a with_options</span></span><span> = <span>?&#8288;and_exit:bool <span>&#45;&gt;</span></span> <span>?&#8288;verbose:bool <span>&#45;&gt;</span></span> <span>?&#8288;compact:bool <span>&#45;&gt;</span></span>
<span>?&#8288;tail_errors:<span>[ `Unlimited <span><span>| `Limit</span> of int</span> ]</span> <span>&#45;&gt;</span></span> <span>?&#8288;quick_only:bool <span>&#45;&gt;</span></span>
<span>?&#8288;show_errors:bool <span>&#45;&gt;</span></span> <span>?&#8288;json:bool <span>&#45;&gt;</span></span> <span>?&#8288;filter:<span>(<span><a href="../../../re/Re/index.html#type-re">Re.re</a> option</span> * <span><span>int list</span> option</span>)</span> <span>&#45;&gt;</span></span>
<span>?&#8288;log_dir:string <span>&#45;&gt;</span></span> <span>?&#8288;bail:bool <span>&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>The various options taken by the tests runners <a href="#val-run"><code>run</code></a> and <a href="#val-run_with_args"><code>run_with_args</code></a>:</p><ul><li><code>and_exit</code> (default <code>true</code>). Once the tests have completed, exit with return code <code>0</code> if all tests passed, otherwise <code>1</code>.</li><li><code>verbose</code> (default <code>false</code>). Display the test std.out and std.err (rather than redirecting to a log file).</li><li><code>compact</code> (default <code>false</code>). Compact the output of the tests.</li><li><code>tail_errors</code> (default unlimited). Show only the last N lines of output of failed tests.</li><li><code>quick_only</code> (default <code>false</code>). Don't run tests with the <span class="xref-unresolved"><code>`Slow</code> speed level</span>.</li><li><code>show_errors</code> (default <code>false</code>). Display the test errors.</li><li><code>json</code> (default <code>false</code>). Print test results in a JSON-compatible format.</li><li><code>log_dir</code> (default <code>&quot;$PWD/_build/_tests/&quot;</code>). The directory in which to log the output of the tests (if <code>verbose</code> is not set).</li><li><code>bail</code> (default <code>false</code>). If true, stop running the tests after the first failure.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span>(<span>string <span>&#45;&gt;</span></span> <span><span><span>unit <a href="#type-test">test</a></span> list</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <a href="#type-with_options">with_options</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-run_with_args" class="anchored"><a href="#val-run_with_args" class="anchor"></a><code><span><span class="keyword">val</span> run_with_args : <span><span>(<span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="#type-test">test</a></span> list</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <a href="#type-with_options">with_options</a></span></span></code></div></div></div></div></div><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span>(<span>?&#8288;argv:<span>string array</span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span><span>unit <a href="#type-test">test</a></span> list</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <a href="#type-with_options">with_options</a></span></span></code></div><div class="spec-doc"><p><code>run n t</code> runs the test suite <code>t</code>. <code>n</code> is the name of the tested library.</p><p>The optional argument <code>and_exit</code> controls what happens when the function ends. By default, <code>and_exit</code> is set, which makes the function exit with <code>0</code> if everything is fine or <code>1</code> if there is an issue. If <code>and_exit</code> is <code>false</code>, then the function raises <code>Test_error</code> on error.</p><p>The optional argument <code>argv</code> specifies command line arguments sent to alcotest like <code>&quot;--json&quot;</code>, <code>&quot;--verbose&quot;</code>, etc. Note that this array will be treated like a regular <code>Sys.argv</code>, so the array must have at least one element, and the first element will be treated as if it was the command name and thus ignored for the purposes of option processing. So <code>~argv:[||]</code> is an error, <code>~argv:[| &quot;--verbose&quot; |]</code> will have no effect, and <code>~argv:[| &quot;ignored&quot;; &quot;--verbose&quot; |]</code> will successfully pass the verbose option.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run_with_args" class="anchored"><a href="#val-run_with_args" class="anchor"></a><code><span><span class="keyword">val</span> run_with_args : <span><span>(<span>?&#8288;argv:<span>string array</span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span> <span>&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="#type-test">test</a></span> list</span> <span>&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <a href="#type-with_options">with_options</a></span></span></code></div><div class="spec-doc"><p><code>run_with_args n a t</code> Similar to <code>run a t</code> but take an extra argument <code>a</code>. Every test function will receive as argument the evaluation of the <code>Cmdliner</code> term <code>a</code>: this is useful to configure the test behaviors using the CLI.</p></div></div></details></div></div></div><div class="odoc-include"><div class="spec include"><div class="doc"><div class="odoc-spec"><div class="spec module-type" id="module-type-TESTABLE" class="anchored"><a href="#module-type-TESTABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-TESTABLE/index.html">TESTABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>TESTABLE</code> provides an abstract description for testable values.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-testable" class="anchored"><a href="#type-testable" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a testable</span></span><span> = <span>(<span class="keyword">module</span> <a href="module-type-TESTABLE/index.html">TESTABLE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-TESTABLE/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p>The type for testable values.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-testable" class="anchored"><a href="#val-testable" class="anchor"></a><code><span><span class="keyword">val</span> testable : <span><span><span class="type-var">'a</span> <a href="../../../fmt/Fmt/index.html#type-t">Fmt.t</a></span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> bool)</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>testable pp eq</code> is a new <a href="#val-testable"><code>testable</code></a> with the pretty-printer <code>pp</code> and equality <code>eq</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../../fmt/Fmt/index.html#type-t">Fmt.t</a></span></span></code></div><div class="spec-doc"><p><code>pp t</code> is <code>t</code>'s pretty-printer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal t</code> is <code>t</code>'s equality.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bool" class="anchored"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>bool</code> tests booleans.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int" class="anchored"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>int</code> tests integers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int32" class="anchored"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span>int32 <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>int32</code> tests 32-bit integers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int64" class="anchored"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>int64 <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>int64</code> tests 64-bit integers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-float" class="anchored"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span>float <span>&#45;&gt;</span></span> <span>float <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>float</code> tests floats with specified absolute error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-char" class="anchored"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span>char <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>char</code> tests characters.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string" class="anchored"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>string</code> tests OCaml strings.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bytes" class="anchored"><a href="#val-bytes" class="anchor"></a><code><span><span class="keyword">val</span> bytes : <span>bytes <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>bytes</code> tests OCaml bytes.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unit" class="anchored"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>unit <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>unit</code> tests unit values (useful for functions with side-effects).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list" class="anchored"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>list t</code> tests lists of <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-slist" class="anchored"><a href="#val-slist" class="anchor"></a><code><span><span class="keyword">val</span> slist : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> int)</span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>slist t comp</code> tests sorted lists of <code>t</code>s. The list are sorted using <code>comp</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-array" class="anchored"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>array t</code> tests arrays of <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-option" class="anchored"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>option t</code> tests optional <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-result" class="anchored"><a href="#val-result" class="anchor"></a><code><span><span class="keyword">val</span> result : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'e</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,Â <span class="type-var">'e</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>result t e</code> tests <code>t</code>s on success and <code>e</code>s on failure.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pair" class="anchored"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>pair a b</code> tests pairs of <code>a</code>s and <code>b</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-triple" class="anchored"><a href="#val-triple" class="anchor"></a><code><span><span class="keyword">val</span> triple : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>triple a b c</code> tests triples of <code>a</code>s, <code>b</code>s and <code>c</code>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_pp" class="anchored"><a href="#val-of_pp" class="anchor"></a><code><span><span class="keyword">val</span> of_pp : <span><span><span class="type-var">'a</span> <a href="../../../fmt/Fmt/index.html#type-t">Fmt.t</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>of_pp pp</code> tests values which can be printed using <code>pp</code> and compared using <code>Pervasives</code>.compare</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pass" class="anchored"><a href="#val-pass" class="anchor"></a><code><span><span class="keyword">val</span> pass : <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>pass</code> tests values of any type and always succeeds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-reject" class="anchored"><a href="#val-reject" class="anchor"></a><code><span><span class="keyword">val</span> reject : <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>reject</code> tests values of any type and always fails.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-neg" class="anchored"><a href="#val-neg" class="anchor"></a><code><span><span class="keyword">val</span> neg : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>neg t</code> is <code>t</code>'s negation: it is <code>true</code> when <code>t</code> is <code>false</code> and it is <code>false</code> when <code>t</code> is <code>true</code>.</p></div></div><h2 id="assertion-functions"><a href="#assertion-functions" class="anchor"></a>Assertion functions</h2><p>Functions for asserting various properties within unit-tests. A failing assertion will cause the testcase to fail immediately.</p><div class="odoc-spec"><div class="spec module" id="module-Source_code_position" class="anchored"><a href="#module-Source_code_position" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Source_code_position/index.html">Source_code_position</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-extra_info" class="anchored"><a href="#type-extra_info" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a extra_info</span></span><span> = <span>?&#8288;here:<a href="Source_code_position/index.html#type-here">Source_code_position.here</a> <span>&#45;&gt;</span></span> <span>?&#8288;pos:<a href="Source_code_position/index.html#type-pos">Source_code_position.pos</a> <span>&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>The assertion functions optionally take information about the <i>location</i> at which they are called in the source code. This is used for giving more descriptive error messages in the case of failure.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check" class="anchored"><a href="#val-check" class="anchor"></a><code><span><span class="keyword">val</span> check : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span> <a href="#type-extra_info">extra_info</a></span></span></code></div><div class="spec-doc"><p>Check that two values are equal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check'" class="anchored"><a href="#val-check'" class="anchor"></a><code><span><span class="keyword">val</span> check' : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span>msg:string <span>&#45;&gt;</span></span> <span>expected:<span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span>actual:<span class="type-var">'a</span> <span>&#45;&gt;</span></span> unit)</span> <a href="#type-extra_info">extra_info</a></span></span></code></div><div class="spec-doc"><p>Check that two values are equal (labeled variant of <a href="#val-check"><code>check</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fail" class="anchored"><a href="#val-fail" class="anchor"></a><code><span><span class="keyword">val</span> fail : <span><span>(<span>string <span>&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <a href="#type-extra_info">extra_info</a></span></span></code></div><div class="spec-doc"><p>Simply fail.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-failf" class="anchored"><a href="#val-failf" class="anchor"></a><code><span><span class="keyword">val</span> failf : <span><span>(<span><span><span>(<span class="type-var">'a</span>,Â <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>,Â unit,Â <span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a></span> <span>&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <a href="#type-extra_info">extra_info</a></span></span></code></div><div class="spec-doc"><p>Simply fail with a formatted message.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_raises" class="anchored"><a href="#val-check_raises" class="anchor"></a><code><span><span class="keyword">val</span> check_raises : <span><span>(<span>string <span>&#45;&gt;</span></span> <span>exn <span>&#45;&gt;</span></span> <span><span>(<span>unit <span>&#45;&gt;</span></span> unit)</span> <span>&#45;&gt;</span></span> unit)</span> <a href="#type-extra_info">extra_info</a></span></span></code></div><div class="spec-doc"><p>Check that an exception is raised.</p></div></div></div></div></div><h2 id="unix-specific-engine-constructors"><a href="#unix-specific-engine-constructors" class="anchor"></a>Unix-specific engine constructors</h2><p>The <code>Alcotest_engine</code> package provides the most general form of the Alcotest API, parameterised over the thread implementation and the platform. This package provides the <code>Unix</code> platform implementation.</p><div class="odoc-spec"><div class="spec module" id="module-Unix" class="anchored"><a href="#module-Unix" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Unix</span><span> = <a href="../../../alcotest/Alcotest/Unix/index.html">Alcotest.Unix</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Core" class="anchored"><a href="#module-Core" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Core</span><span> = <a href="../../../alcotest/Alcotest/Core/index.html">Alcotest.Core</a></span></code></div><div class="spec-doc"><p><a href="../../../alcotest/Alcotest/Core/Make/index.html"><code>Core.Make</code></a> is <code>Alcotest_engine.Core.Make (Unix)</code></p></div></div><div class="odoc-spec"><div class="spec module" id="module-Cli" class="anchored"><a href="#module-Cli" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Cli</span><span> = <a href="../../../alcotest/Alcotest/Cli/index.html">Alcotest.Cli</a></span></code></div><div class="spec-doc"><p><a href="../../../alcotest/Alcotest/Cli/Make/index.html"><code>Cli.Make</code></a> is <code>Alcotest_engine.Cli.Make (Unix)</code></p></div></div></details></div></div></div><div class="odoc-spec"><div class="spec value" id="val-exn" class="anchored"><a href="#val-exn" class="anchor"></a><code><span><span class="keyword">val</span> exn : <span>exn <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'b</span> <span>&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pair3" class="anchored"><a href="#val-pair3" class="anchor"></a><code><span><span class="keyword">val</span> pair3 : <span><span><span>(<span class="type-var">'a</span> * <span>(<span class="type-var">'b</span> * <span class="type-var">'c</span>)</span>)</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pair4" class="anchored"><a href="#val-pair4" class="anchor"></a><code><span><span class="keyword">val</span> pair4 : <span><span><span>(<span class="type-var">'a</span> * <span>(<span class="type-var">'b</span> * <span>(<span class="type-var">'c</span> * <span class="type-var">'d</span>)</span>)</span>)</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tuple3" class="anchored"><a href="#val-tuple3" class="anchor"></a><code><span><span class="keyword">val</span> tuple3 : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tuple4" class="anchored"><a href="#val-tuple4" class="anchor"></a><code><span><span class="keyword">val</span> tuple4 : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'d</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-assert_true" class="anchored"><a href="#val-assert_true" class="anchor"></a><code><span><span class="keyword">val</span> assert_true : <span>string <span>&#45;&gt;</span></span> <span>bool <span>&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-assert_false" class="anchored"><a href="#val-assert_false" class="anchor"></a><code><span><span class="keyword">val</span> assert_false : <span>string <span>&#45;&gt;</span></span> <span>bool <span>&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-impossible" class="anchored"><a href="#val-impossible" class="anchor"></a><code><span><span class="keyword">val</span> impossible : <span>string <span>&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lwt_assert_true" class="anchored"><a href="#val-lwt_assert_true" class="anchor"></a><code><span><span class="keyword">val</span> lwt_assert_true : <span>string <span>&#45;&gt;</span></span> <span>bool <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lwt_assert_false" class="anchored"><a href="#val-lwt_assert_false" class="anchor"></a><code><span><span class="keyword">val</span> lwt_assert_false : <span>string <span>&#45;&gt;</span></span> <span>bool <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lwt_check" class="anchored"><a href="#val-lwt_check" class="anchor"></a><code><span><span class="keyword">val</span> lwt_check : <span><span><span class="type-var">'a</span> <a href="../../../alcotest/Alcotest/index.html#type-testable">Alcotest.testable</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lwt_impossible" class="anchored"><a href="#val-lwt_impossible" class="anchor"></a><code><span><span class="keyword">val</span> lwt_impossible : <span>string <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lwt_fail" class="anchored"><a href="#val-lwt_fail" class="anchor"></a><code><span><span class="keyword">val</span> lwt_fail : <span>string <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lwt_assert_catch" class="anchored"><a href="#val-lwt_assert_catch" class="anchor"></a><code><span><span class="keyword">val</span> lwt_assert_catch : <span><span>(<span>unit <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span></span> <span>exn <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-contains" class="anchored"><a href="#val-contains" class="anchor"></a><code><span><span class="keyword">val</span> contains : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span>string <span>&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span>&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span></span> unit</span></code></div></div></details></div></div></div><div class="odoc-spec"><div class="spec value" id="val-trace" class="anchored"><a href="#val-trace" class="anchor"></a><code><span><span class="keyword">val</span> trace : <span><span><a href="../../../tezos-error-monad/Tezos_error_monad/TzCore/index.html#type-error">Tezos_error_monad.TzCore.error</a> list</span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tzresults" class="anchored"><a href="#val-tzresults" class="anchor"></a><code><span><span class="keyword">val</span> tzresults : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span>&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,Â <span><a href="../../../tezos-error-monad/Tezos_error_monad/TzCore/index.html#type-error">Tezos_error_monad.TzCore.error</a> list</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-p2p_peer_id" class="anchored"><a href="#val-p2p_peer_id" class="anchor"></a><code><span><span class="keyword">val</span> p2p_peer_id : <span><a href="../../../tezos-base/Tezos_base/P2p_peer_id/index.html#type-t">Tezos_base.P2p_peer.Id.t</a> <a href="../../../alcotest/Alcotest/index.html#type-testable">Alcotest.testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-json" class="anchored"><a href="#val-json" class="anchor"></a><code><span><span class="keyword">val</span> json : <span><a href="../../../data-encoding/Data_encoding/index.html#type-json">Data_encoding.json</a> <a href="#type-testable">testable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tztest" class="anchored"><a href="#val-tztest" class="anchor"></a><code><span><span class="keyword">val</span> tztest : <span>string <span>&#45;&gt;</span></span> <span><a href="../../../alcotest/Alcotest/index.html#type-speed_level">Alcotest.speed_level</a> <span>&#45;&gt;</span></span> <span><span>(<span>unit <span>&#45;&gt;</span></span> <span><span><span>(unit,Â <span><a href="../../../tezos-error-monad/Tezos_error_monad/TzCore/index.html#type-error">Tezos_error_monad.TzCore.error</a> list</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span></span> <span>unit <a href="../../../alcotest-lwt/Alcotest_lwt/index.html#type-test_case">Alcotest_lwt.test_case</a></span></span></code></div><div class="spec-doc"><p>Transorm a function running in the error monad into an Alcotest, taking care of failing the test if the function results is an error. Note that the given function must still take care of test assertions.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Alcotest_extra" class="anchored"><a href="#module-Alcotest_extra" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Alcotest_extra/index.html">Alcotest_extra</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Mock_sink" class="anchored"><a href="#module-Mock_sink" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Mock_sink/index.html">Mock_sink</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mock_sink" class="anchored"><a href="#val-mock_sink" class="anchor"></a><code><span><span class="keyword">val</span> mock_sink : <span><a href="Mock_sink/index.html#type-t">Mock_sink.t</a> <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/index.html#type-sink_definition">Tezos_event_logging.Internal_event.sink_definition</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-with_empty_mock_sink" class="anchored"><a href="#val-with_empty_mock_sink" class="anchor"></a><code><span><span class="keyword">val</span> with_empty_mock_sink : <span><span>(<span>unit <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span></span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>with_empty_mock_sink f</code> executes f after activating or clearing a Mock_sink sink.</p><p>Sinks can only be registered and activated once, and not removed thereafter.</p></div></div></div></body></html>