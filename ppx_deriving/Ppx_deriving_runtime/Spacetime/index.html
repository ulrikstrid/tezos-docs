<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Spacetime (ppx_deriving.Ppx_deriving_runtime.Spacetime)</title><link rel="stylesheet" href="../../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">ppx_deriving</a> &#x00BB; <a href="../index.html">Ppx_deriving_runtime</a> &#x00BB; Spacetime</nav><header class="odoc-preamble"><h1>Module <code><span>Ppx_deriving_runtime.Spacetime</span></code></h1><p>Profiling of a program's space behaviour over time. Currently only supported on x86-64 platforms running 64-bit code.</p><p>To use the functions in this module you must:</p><ul><li>configure the compiler with &quot;-spacetime&quot;;</li><li>compile to native code. Without these conditions being satisfied the functions in this module will have no effect.</li></ul><p>Instead of manually taking profiling heap snapshots with this module it is possible to use an automatic snapshot facility that writes profiling information at fixed intervals to a file. To enable this, all that needs to be done is to build the relevant program using a compiler configured with -spacetime; and set the environment variable OCAML_SPACETIME_INTERVAL to an integer number of milliseconds giving the interval between profiling heap snapshots. This interval should not be made excessively small relative to the running time of the program. A typical interval to start with might be 1/100 of the running time of the program. The program must exit &quot;normally&quot; (i.e. by calling <code>exit</code>, with whatever exit code, rather than being abnormally terminated by a signal) so that the snapshot file is correctly completed.</p><p>When using the automatic snapshot mode the profiling output is written to a file called &quot;spacetime-&lt;pid&gt;&quot; where &lt;pid&gt; is the process ID of the program. (If the program forks and continues executing then multiple files may be produced with different pid numbers.) The profiling output is by default written to the current working directory when the program starts. This may be customised by setting the OCAML_SPACETIME_SNAPSHOT_DIR environment variable to the name of the desired directory.</p><p>If using automatic snapshots the presence of the <code>save_event_for_automatic_snapshots</code> function, below, should be noted.</p><p>The functions in this module are thread safe.</p><p>For functions to decode the information recorded by the profiler, see the Spacetime offline library in otherlibs/.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-enabled" class="anchored"><a href="#val-enabled" class="anchor"></a><code><span><span class="keyword">val</span> enabled : bool</span></code></div><div class="spec-doc"><p><code>enabled</code> is <code>true</code> if the compiler is configured with spacetime and <code>false</code> otherwise</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Series" class="anchored"><a href="#module-Series" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Series/index.html">Series</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Snapshot" class="anchored"><a href="#module-Snapshot" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Snapshot/index.html">Snapshot</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-save_event_for_automatic_snapshots" class="anchored"><a href="#val-save_event_for_automatic_snapshots" class="anchor"></a><code><span><span class="keyword">val</span> save_event_for_automatic_snapshots : <span>event_name:string <span>&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Like <a href="Series/index.html#val-save_event"><code>Series.save_event</code></a>, but writes to the automatic snapshot file. This function is a no-op if OCAML_SPACETIME_INTERVAL was not set.</p></div></div></div></body></html>